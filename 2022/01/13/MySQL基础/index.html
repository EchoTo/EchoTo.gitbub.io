<!DOCTYPE html>
<!--[if lte IE 8 ]>
<html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<!--
***************  *      *     *
      8          *    *       *
      8          *  *         *
      8          **           *
      8          *  *         *
      8          *    *       *
      8          *      *     *
      8          *        *   ***********    -----Theme By Kieran(http://go.kieran.top)
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<!--<![endif]-->


    <head>
        <title>
            
                MySQL基础 |
                    
                        ShanTianQi&#39;s Blog
        </title>
        <!-- Meta data -->
        <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="ShanTianQi's Blog">
        <meta name="author" content="ShanTianQi">
        <meta name="description" content="" />
        <meta name="keywords" content="" />

        <!-- Favicon, (keep icon in root folder) -->
        <link rel="Shortcut Icon" href="/img/bitbug_favicon.ico" type="image/ico">

        <link rel="alternate" href="/atom.xml" title="ShanTianQi&#39;s Blog" type="application/atom+xml">
        <link rel="stylesheet" href="/css/all.css" media="screen" type="text/css">
        
            <link rel="stylesheet" href="/highlightjs/vs.css" type="text/css">
            

                <!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="/css/ie8.css" />
    <![endif]-->

                <!-- jQuery | Load our jQuery, with an alternative source fallback to a local version if request is unavailable -->
                <script src="/js/jquery-1.11.1.min.js"></script>
                <script>
                    window.jQuery || document.write('<script src="js/jquery-1.11.1.min.js"><\/script>')
                </script>
                <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
                <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

                <!-- Load these in the <head> for quicker IE8+ load times -->
                <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
                <!--[if lt IE 9]>
    <script src="/js/html5shiv.min.js"></script>
    <script src="/js/respond.min.js"></script>
    <![endif]-->

                <style>
                    .col-md-8.col-md-offset-2.opening-statement img {
                        display: none;
                    }
                </style>
    </head>
<!--
<body class="post-template">
-->
<body id="index" class="lightnav animsition">

      <!-- ============================ Off-canvas navigation =========================== -->

<div class="sb-slidebar sb-right sb-style-overlay sb-momentum-scrolling">
    <div class="sb-close" aria-label="Close Menu" aria-hidden="true">
        <img src="/img/close.png" alt="Close" />
    </div>
    <!-- Lists in Slidebars -->
    <ul class="sb-menu">
        <li><a href="/" class="animsition-link" title="Home">首页</a></li>
        <li><a href="/archives" class="animsition-link" title="archive">归档</a></li>
        <!-- Dropdown Menu -->
        
                
                    <li>
                        <a class="sb-toggle-submenu">分类<span class="sb-caret"></span></a>
                        <ul class="sb-submenu">
                            
                                <li>
                                    <a href="/categories/First/" class="animsition-link">
                                        First<small>(2)</small></a>
                                </li>
                                
                                <li>
                                    <a href="/categories/MySQL/" class="animsition-link">
                                        MySQL<small>(1)</small></a>
                                </li>
                                
                                <li>
                                    <a href="/categories/daily/" class="animsition-link">
                                        daily<small>(1)</small></a>
                                </li>
                                
                                <li>
                                    <a href="/categories/java/" class="animsition-link">
                                        java<small>(7)</small></a>
                                </li>
                                
                                <li>
                                    <a href="/categories/算法/动态规划/" class="animsition-link">
                                        动态规划<small>(1)</small></a>
                                </li>
                                
                                <li>
                                    <a href="/categories/算法/排序/" class="animsition-link">
                                        排序<small>(1)</small></a>
                                </li>
                                
                                <li>
                                    <a href="/categories/板子、算法/" class="animsition-link">
                                        板子、算法<small>(1)</small></a>
                                </li>
                                
                                <li>
                                    <a href="/categories/算法/" class="animsition-link">
                                        算法<small>(2)</small></a>
                                </li>
                                
                        </ul>
                    </li>
                    
                        <li><a href="/archives/link.html" class="animsition-link" title="about">友链</a></li>
                        <li><a href="/archives/about.html" class="animsition-link" title="about">关于</a></li>
    </ul>
    <!-- Lists in Slidebars -->
    <ul class="sb-menu secondary">
        
    </ul>
</div>

<!-- ============================ END Off-canvas navigation =========================== -->

<!-- ============================ #sb-site Main Page Wrapper =========================== -->

<div id="sb-site">
    <!-- #sb-site - All page content should be contained within this id, except the off-canvas navigation itself -->

    <!-- ============================ Header & Logo bar =========================== -->

    <div id="navigation" class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <!-- Info-bar -->
                <nav>
                    <ul class="nav">
                        <li>
                            <a href="/" class="animsition-link">
                                ShanTianQi's Blog
                            </a>
                        </li>
                        <!-- 
                            <li><a href="https://github.com/" title="Github" target="_blank"><i class="icon-github"></i></a></li>
                             -->
                    </ul>
                </nav>
                <!--// Info-bar -->
            </div>
            <!-- // .container -->
            <div class="learnmore sb-toggle-right">More</div>
            <button type="button" class="navbar-toggle menu-icon sb-toggle-right" title="More">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar before"></span>
                <span class="icon-bar main"></span>
                <span class="icon-bar after"></span>
                </button>
        </div>
        <!-- // .navbar-inner -->
    </div>

    <!-- ============================ Header & Logo bar =========================== -->
      <!-- ============================ Hero Image =========================== -->

<section id="hero" class="scrollme">
    <div class="container-fluid element-img" style="background: url(/img/bg_img.png) no-repeat center center fixed;background-size: cover">
        <div class="row">
            <div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-8 col-md-offset-2 vertical-align cover boost text-center">
                <div class="center-me animateme" data-when="exit" data-from="0" data-to="0.6" data-opacity="0" data-translatey="100">
                    <div>
                        
                            <p>
                                
                            </p>
                            
                            <p>
                                每一个不曾起舞的日子都是对生命的辜负。
                            </p>
                            

                    </div>
                </div>
            </div>
            <!-- // .col-md-12 -->
        </div>
        <div class="herofade beige-dk"></div>
    </div>
</section>

<!-- Height spacing helper -->
<div class="heightblock"></div>
<!-- // End height spacing helper -->

<!-- ============================ END Hero Image =========================== -->


    <section id="intro">
        <div class="container" style="background-color: #fff;">
            <div class="row col-md-offset-2">
                <div class="col-md-8">
                    <span class="post-meta">
      <time datetime="2022-01-13T05:47:13.000Z" itemprop="datePublished">
          2022-01-13
      </time>
    
    
    | 
    <a href='/tags/MySQL/'>MySQL</a>
    
    
</span>
                        <h1>
                            MySQL基础
                        </h1>
                </div>
            </div>
            <div class="col-md-8 col-md-offset-2">
                <h1 id="第一章-初识MySQL"><a href="#第一章-初识MySQL" class="headerlink" title="第一章    初识MySQL"></a>第一章    初识MySQL</h1><hr>
<h2 id="1-1相关概念"><a href="#1-1相关概念" class="headerlink" title="1.1相关概念"></a>1.1相关概念</h2><p>保存数据的容器：<code>数组</code>、<code>集合</code>、<code>文件</code></p>
<p><strong>使用数据库的好处：</strong></p>
<ul>
<li>实现数据持久化</li>
<li>使用完整的管理系统统一管理，易于查询</li>
</ul>
<p><strong>1.DB</strong></p>
<p>数据库(database)：存储数据的”仓库”。它保存了一系列有组织的数据。</p>
<p><strong>2.DBMS</strong></p>
<p>数据库管理系统(Database Management System)。数据库是通过DBMS创建和操作的容器。</p>
<p>常见的DBMS：MySQL、Oracle、DB2、SqlServer等</p>
<p><strong>3.SQL</strong></p>
<p>结构化查询语言(Structure Query Language)：专门用来与数据库通信的语言。</p>
<p><img src="https://gitee.com/are-you-a-cookie/cloudimages/raw/master/img/QQ%E6%88%AA%E5%9B%BE20210821171708.png" alt="QQ截图20210821171708"></p>
<p>优点：</p>
<ul>
<li>不是某个特定数据库供应商专有的语言，几乎所有DBMS都支持SQL</li>
<li>简单易学</li>
<li>虽然简单，但实际上是一种强有力的语言，灵活使用其语言元素，可以进行非常复杂和高级的数据库操作。</li>
</ul>
<hr>
<h2 id="1-2数据库存储数据的特点"><a href="#1-2数据库存储数据的特点" class="headerlink" title="1.2数据库存储数据的特点"></a>1.2数据库存储数据的特点</h2><p>1.将数据放到表中，表再放到库中</p>
<p><img src="https://gitee.com/are-you-a-cookie/cloudimages/raw/master/img/QQ%E6%88%AA%E5%9B%BE20210821182429.png" alt="QQ截图20210821182429"></p>
<p>2.一个数据库中可以有多个表，每个表都有一个名字，用来标识自己。表名具有唯一性。</p>
<p>3.表具有一些特性，这些特性定义了数据再表中如何存储，类似java中”类”的设计。</p>
<p>4.表由列组成，我们也称为字段。所有表都是由一个或多个列组成的，每一列类似java中的”属性”。</p>
<p>5.表中的数据是按行存储的，每一行类似于java中的”对象”。</p>
<hr>
<h1 id="第二章-初始MySQL"><a href="#第二章-初始MySQL" class="headerlink" title="第二章    初始MySQL"></a>第二章    初始MySQL</h1><hr>
<h2 id="2-1MySQL产品的介绍"><a href="#2-1MySQL产品的介绍" class="headerlink" title="2.1MySQL产品的介绍"></a>2.1MySQL产品的介绍</h2><p>MySQL数据库隶属于MySQLAB公司，总部位于瑞典，后被oracle收购。</p>
<p>创始人：Monty</p>
<p>优点：</p>
<ul>
<li>成本低：开放源代码，一般可以免费试用</li>
<li>性能高：执行很快</li>
<li>简单：很容易安装和使用</li>
</ul>
<hr>
<h2 id="2-2MySQL产品的安装"><a href="#2-2MySQL产品的安装" class="headerlink" title="2.2MySQL产品的安装"></a>2.2MySQL产品的安装</h2><p>DBMS分为两类：</p>
<ul>
<li>基于共享文件系统的DBMS(Access)微软的</li>
<li>基于客户机——服务器的DBMS，比如MySQL、Oracle、SqlServer</li>
</ul>
<hr>
<h2 id="2-3MySQL服务的启动和停止"><a href="#2-3MySQL服务的启动和停止" class="headerlink" title="2.3MySQL服务的启动和停止"></a>2.3MySQL服务的启动和停止</h2><p>第一种方法：WIN+R   输入  services.msc，找到MySQL右键启动或停止服务</p>
<p>第二种方法：以管理员身份打开cmd </p>
<ul>
<li>启动  <code>net start mysql</code></li>
<li>关闭  <code>net stop mysql</code></li>
</ul>
<hr>
<h2 id="2-4MySQL服务的登录与退出"><a href="#2-4MySQL服务的登录与退出" class="headerlink" title="2.4MySQL服务的登录与退出"></a>2.4MySQL服务的登录与退出</h2><p>登录：在dos窗口中输入命令<code>mysql -h localhost -P 3306 -u root -p</code></p>
<p>本机简写：<code>mysql -u root -p密码</code></p>
<ul>
<li>最前面的mysql你可以理解成一个关键字或者理解成一个固定的命令，是固定写法，类似于java、jdk中的javac命令或java命令</li>
<li>-h表示host,即主机的ip地址</li>
<li>-P表示port，端口，mysql数据库的默认端口是3306，当然啦，你可以自己改端口号，我这里没改端口号(注意：这是大写的字母P)</li>
<li>-u表示user用户名</li>
<li>-p表示password密码(注意：这是小写的字母p)</li>
</ul>
<blockquote>
<p><strong>大写的P表示端口号，小写的p表示密码</strong></p>
</blockquote>
<p>退出：<strong>exit</strong></p>
<hr>
<h2 id="2-5MySQL的常见命令和语法规范"><a href="#2-5MySQL的常见命令和语法规范" class="headerlink" title="2.5MySQL的常见命令和语法规范"></a>2.5MySQL的常见命令和语法规范</h2><p><strong>常见命令：</strong></p>
<p>1.查看当前所有的数据库</p>
<p><code>show databases;</code></p>
<p>2.打开指定的库</p>
<p><code>use 库名;</code></p>
<p>3.查看当前库的所有表</p>
<p><code>show tables;</code></p>
<p>4.查看其他库的所有表</p>
<p><code>show tables from 库名;</code></p>
<p>5.创建表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE table 表名&#123;</span><br><span class="line">     列名  列类型，</span><br><span class="line">     列名  列类型，</span><br><span class="line">     ...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>6.查看表结构</p>
<p><code>desc 表名;</code></p>
<p>7.查看服务器的版本</p>
<p>方式一：登录到mysql服务端</p>
<p><code>select version();</code></p>
<p>方式二：没有登录到mysql服务端</p>
<p><code>mysql --version</code>或者<code>mysql --V</code></p>
<p><strong>语法规范</strong>：</p>
<p>1.不区分大小写。但建议关键字大写，表名、列名小写</p>
<p>2.每条命令最好用分号结尾</p>
<p>3.每条命令根据需要，可以进行缩进或换行</p>
<p>4.注释</p>
<p>​     单行注释：#注释文字</p>
<p>​     单行注释：– 注释文字</p>
<p>​      多行注释：/* 注释文字 */</p>
<hr>
<h1 id="第三章-DQL语言"><a href="#第三章-DQL语言" class="headerlink" title="第三章    DQL语言"></a>第三章    DQL语言</h1><hr>
<p><strong>数据查询语言</strong></p>
<h2 id="3-1基础查询"><a href="#3-1基础查询" class="headerlink" title="3.1基础查询"></a>3.1基础查询</h2><p><strong>语法：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT     查询列表     </span><br><span class="line">FROM      表名;</span><br></pre></td></tr></table></figure>

<p>类似于：System.out.println(打印东西);</p>
<p><strong>特点：</strong></p>
<p>1.查询列表可以是：表中的字段、常量值、表达式、函数</p>
<p>2.查询的结果是一个虚拟的表格</p>
<p><strong>1.查询表中的单个字段</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name </span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure>

<p><strong>2.查询表中的多个字段</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,job_id </span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure>

<p><strong>3.查询表中的所有字段</strong></p>
<p>第一种方式：哪里不会点哪里(双击)（<del>坏笑</del>）</p>
<p>第二种方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM employees;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>tips：</p>
<ul>
<li>查询前：<strong>USE   库名;</strong>         #进入指定的数据库</li>
<li>当表名和关键字重复时，表名用着重号包裹，如<code>name</code></li>
</ul>
</blockquote>
<p><strong>4.查询常量值</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT 100;</span><br><span class="line">SELECT &#x27;john&#x27;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>tips：字符型和日期型的常量值必须用单引号引起来，数值型不需要。</p>
</blockquote>
<p><strong>5.查询表达式</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT 100*98;</span><br><span class="line">SELECT 100%98;</span><br></pre></td></tr></table></figure>

<p><strong>6.查询函数</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT VERSION(实参列表);</span><br></pre></td></tr></table></figure>

<p><strong>7.起别名</strong></p>
<ul>
<li>便于理解</li>
<li>如果要查询的字段有重名的情况，使用别名可以区分开来</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">方式一：使用AS</span><br><span class="line">SELECT 100*98 AS 结果(别名);</span><br><span class="line">方式二：使用空格</span><br><span class="line">SELECT last_name 姓,first_name 名 FROM employees;</span><br><span class="line">#案例：查询salary，显示结果为 out put</span><br><span class="line">SELECT salary AS &#x27;out put&#x27; FROM employess;</span><br></pre></td></tr></table></figure>

<p><strong>8.去重</strong></p>
<p>关键字：<strong>DISTINCT</strong></p>
<p><strong>去掉重复的数据</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT department_id FROM employees;</span><br></pre></td></tr></table></figure>

<p><strong>9.+号的作用</strong></p>
<p>Java中的+</p>
<ul>
<li>运算符：两个操作数都为数值型</li>
<li>连接符：只要有一个操作数为字符串</li>
</ul>
<p>MySQL中的+</p>
<ul>
<li>仅仅只有一个功能：运算符</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT 100+90;#两个操作数都为数值型，则做加法运算</span><br><span class="line">SELECT &#x27;123&#x27;+90;#其中一方为字符型，则试图将字符型数值转换成数值型，如果转换成功，则继续做加法运算，</span><br><span class="line">SELECT &#x27;john&#x27;+90;</span><br><span class="line">#如果转换失败，则将字符型数值转换成0</span><br><span class="line">SELECT null+10;#只要一方为null，结果肯定为null</span><br></pre></td></tr></table></figure>

<p>案例：查询员工名和姓连接成一个字段，并显示 姓名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT CONCAT(&#x27;A&#x27;,&#x27;B&#x27;,&#x27;C&#x27;) AS 结果</span><br><span class="line"></span><br><span class="line">SELECT CONCAT(last_name,first_name) AS 姓名</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure>

<p><strong>附加：</strong></p>
<ul>
<li><strong>IFNULL函数</strong></li>
</ul>
<p>MySQL <code>IFNULL</code>函数是MySQL控制流函数之一，它接受两个参数，如果不是<code>NULL</code>，则返回第一个参数。 否则，<code>IFNULL</code>函数返回第二个参数。</p>
<p>两个参数可以是文字值或表达式。</p>
<p>以下说明了<code>IFNULL</code>函数的语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IFNULL(expression_1,expression_2);</span><br></pre></td></tr></table></figure>

<p>如果<code>expression_1</code>不为<code>NULL</code>，则<code>IFNULL</code>函数返回<code>expression_1</code>; 否则返回<code>expression_2</code>的结果。</p>
<p><code>IFNULL</code>函数根据使用的上下文返回字符串或数字。</p>
<p>如果要返回基于<code>TRUE</code>或<code>FALSE</code>条件的值，而不是<code>NULL</code>，则应使用IF函数。</p>
<ul>
<li><strong>ISNULL函数</strong></li>
</ul>
<p>返回 <strong>一个布尔值</strong> ，该值指示一个 表达式 是否不包含 Null (数据) 。</p>
<p><strong>语法</strong></p>
<p>所需的 <strong>表达式参数</strong>包含一个或多个 数值表达式 变量 字符串表达式 。</p>
<p><strong>备注</strong></p>
<p><strong>如果表达式为</strong> <strong>Null，</strong>则 IsNull<strong>返回\True;<strong>否则</strong>，IsNull</strong>返回<strong>False。如果表达式由多个表达式 变量 ，则任何构成变量中的</strong>Null都会导致为整个表达式返回 True。</p>
<p>Null 值表示<strong>变体不包含</strong>任何有效数据。 <strong>Null</strong> 与 空 不同，它表示变量尚未初始化。 它也不与零长度字符串 (“) ，有时称为 null 字符串。</p>
<p><strong>重要:</strong> 使用 <strong>IsNull</strong> 函数确定表达式是否包含 <strong>Null</strong> 值。 在某些情况下，预期计算结果为<strong>True</strong>的表达式（例如 If Var = Null 和 If Var &lt;&gt; Null）始终<strong>为 False。</strong> 这是因为包含NULL<strong>的任何表达式本身为</strong>Null，<strong>因此为</strong>False。</p>
<hr>
<h2 id="3-2条件查询"><a href="#3-2条件查询" class="headerlink" title="3.2条件查询"></a>3.2条件查询</h2><p><strong>语法：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT 查询列表</span><br><span class="line">FROM   表名</span><br><span class="line">WHERE 筛选条件;#类似于if语句</span><br><span class="line">#执行语句顺序 2、3、1</span><br></pre></td></tr></table></figure>

<p><strong>分类：</strong></p>
<p><strong>1.按条件表达式筛选</strong></p>
<ul>
<li>简单条件运算符：&gt;  &lt;  =  !=或&lt;&gt;(建议这个)  &gt;=  &lt;=</li>
</ul>
<p>案例一：查询工资&gt;12000的员工信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&gt;12000;</span><br></pre></td></tr></table></figure>

<p>案例二：查询部门编号不等于90号的员工名和部门编号</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE department_id &lt;&gt; 90 ;</span><br></pre></td></tr></table></figure>

<p><strong>2.按逻辑表达式筛选</strong></p>
<p>作用：用于连接条件表达式</p>
<ul>
<li>逻辑运算符 &amp;&amp;  ||  ！</li>
</ul>
<p>​       建议使用MySQL里自带的 and  or  not</p>
<p>案例一：查询工资在10000到20000之间的员工名、工资、以及奖金</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  salary,</span><br><span class="line">  commission_pct </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &gt;= 10000 </span><br><span class="line">  AND salary &lt;= 20000 ;</span><br></pre></td></tr></table></figure>

<p>案例二：查询部门编号不是在90到110之间，或者工资高于15000的员工信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE department_id &lt;= 90 </span><br><span class="line">  OR department_id &gt;= 110 </span><br><span class="line">  OR salary &gt;= 15000 ;</span><br></pre></td></tr></table></figure>

<p><strong>3.模糊查询</strong></p>
<p><strong>like</strong></p>
<p>特点：一般和通配符搭配使用</p>
<ul>
<li><p>%任意多个字符，包含0个字符</p>
</li>
<li><p>任意单个字符</p>
</li>
</ul>
<p>案例一：查询员工名中包含字符a的员工信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE last_name LIKE &#x27;%a%&#x27; ;</span><br></pre></td></tr></table></figure>

<p>案例二：查询员工名中第三个字符为e，第五个字符为a的员工名和工资</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">last_name,</span><br><span class="line">salary</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">last_name LIKE &#x27;__n_l%&#x27;;</span><br></pre></td></tr></table></figure>

<p>案例三：查询员工名中第二个字符为_的员工名</p>
<p><strong>ESCAPE转译</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">last_name</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">last_name LIKE &#x27;_\_%&#x27;;</span><br><span class="line">#或者last_name LIKE &#x27;_$_%&#x27; ESCAPE &#x27;$&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>between and</strong></p>
<p>特点：</p>
<ul>
<li>使用between and可以提高语句的简洁度</li>
<li>包含临界值</li>
<li>两个临界值不要调换顺序</li>
</ul>
<p>案例一：查询员工编号在100到120之间的员工信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE manager_id BETWEEN 100 </span><br><span class="line">  AND 120 ;</span><br></pre></td></tr></table></figure>

<p><strong>in</strong></p>
<p>含义：判断某字段的值是否属于in列表中的某一项</p>
<p>特点：</p>
<ul>
<li>使用in提高语句简洁度</li>
<li>in列表的值类型必须一致或兼容</li>
<li>不支持通配符</li>
</ul>
<p>案例一：查询员工的工种编号是 IT_PROG、AD_VP、AD_PRES中的一个员工名和工种编号</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  job_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE job_id IN (&#x27;IT_PROG&#x27;, &#x27;AD_VP&#x27;, &#x27;AD_PRES&#x27;) ;</span><br></pre></td></tr></table></figure>

<p><strong>is  null</strong></p>
<p>特点：</p>
<ul>
<li>=或&lt;&gt;不能用于判断null值</li>
<li>is null或者is not null 可以判断null值</li>
<li>is不能判断数值(不能当=来用)</li>
</ul>
<p>案例一：查询没有奖金的员工名和奖金率</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  commission_pct </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct IS NULL ;</span><br></pre></td></tr></table></figure>

<p><strong>附加：安全等于&lt;=&gt;</strong></p>
<ul>
<li>可以判断null值</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  commission_pct </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct &lt;=&gt; NULL ;</span><br></pre></td></tr></table></figure>

<ul>
<li>也可以判断数值</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary &lt;=&gt; 12000;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>tips：</p>
<ul>
<li>IS NULL：仅仅可以判断NULL值，可读性较高，建议使用</li>
<li>&lt;=&gt;：既可以判断NULL值，又可以判断普通的数值，可读性较低</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">last_name,</span><br><span class="line">department_id,</span><br><span class="line">salary*12*(1+IFNULL(commission_pct,0)) AS 年薪</span><br><span class="line">FROM</span><br><span class="line">employees;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="3-3排序查询"><a href="#3-3排序查询" class="headerlink" title="3.3排序查询"></a>3.3排序查询</h2><p><strong>语法：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT 查询列表</span><br><span class="line">FROM 表</span><br><span class="line">【WHERE 筛选条件】</span><br><span class="line">ORDER BY 排序列表  【ASC|DESC】</span><br></pre></td></tr></table></figure>

<p><strong>特点：</strong></p>
<p>1.ASC：升序，DESC：降序，如果不写默认是升序</p>
<p>2.ORDER BY字句中可以支持单个字段、多个字段、表达式、函数、别名</p>
<p>3.ORDER BY字句一般是放再查询语句的最后面，limit字句除外</p>
<p>案例一：查询员工信息，要求工资从高到低排序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">ORDER BY salary DESC ;</span><br></pre></td></tr></table></figure>

<p>案例二：查询部门编号&gt;=90的员工信息，按入职信息先后进行排序【添加筛选条件】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE department_id &gt;= 90 </span><br><span class="line">ORDER BY hiredate ASC ;</span><br></pre></td></tr></table></figure>

<p>案例三：按年薪的高低显示员工的信息和 年薪【按表达式排序】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  *,</span><br><span class="line">  salary * 12 * (1+ IFNULL(commission_pct, 0)) AS 年薪 </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">ORDER BY salary * 12 * (1+ IFNULL(commission_pct, 0)) DESC ;</span><br></pre></td></tr></table></figure>

<p>案例四：按年薪的高低显示员工的信息和 年薪【按别名排序】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  *,</span><br><span class="line">  salary * 12 * (1+ IFNULL(commission_pct, 0)) AS 年薪 </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">ORDER BY 年薪 DESC ;</span><br></pre></td></tr></table></figure>

<p>案例五：按姓名的长度显示员工的姓名和工资【按函数排序】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  LENGTH(last_name) 字节长度,</span><br><span class="line">  last_name,</span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">ORDER BY LENGTH(last_name) DESC ;</span><br></pre></td></tr></table></figure>

<p>案例6：查询员工信息，要求先按工资升序排序，再按员工编号降序排序【按多个字段排序】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">ORDER BY salary ASC,</span><br><span class="line">  employee_id DESC ;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="3-4常见函数"><a href="#3-4常见函数" class="headerlink" title="3.4常见函数"></a>3.4常见函数</h2><hr>
<p><strong>概念：</strong></p>
<p>类似于java的方法，将一组逻辑语句封装在方法体中，对外暴露方法名。</p>
<p><strong>好处：</strong></p>
<ul>
<li>隐藏了实现细节</li>
<li>提高代码的重用性</li>
</ul>
<p><strong>调用：</strong></p>
<p>SECLET 函数名(实参列表) 【from表】;</p>
<p><strong>特点：</strong></p>
<ul>
<li>叫什么(函数名)</li>
<li>干什么(函数功能)</li>
</ul>
<p><strong>分类：</strong></p>
<ul>
<li>单行函数</li>
</ul>
<p>如concat、length、ifnull等</p>
<ul>
<li>分组函数</li>
</ul>
<p>做统计使用，又称为统计函数、聚合函数、组函数</p>
<p><strong>单行函数：</strong></p>
<p><strong>1.字符函数</strong></p>
<ul>
<li><p><strong>length</strong></p>
<p>获取参数值的字节个数</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT LENGTH(&#x27;joho&#x27;);</span><br><span class="line">SELECT LENGTH(&#x27;数据库MySQL&#x27;);</span><br><span class="line"></span><br><span class="line">SHOW VARIABLES LIKE &#x27;%char%&#x27;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>conact</strong></p>
<p>拼接字符串</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT CONCAT(last_name,&#x27;_&#x27;,first_name) 姓名</span><br><span class="line">FROM</span><br><span class="line">employees;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>upper(大写)、lower(小写)</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT UPPER(&#x27;john&#x27;);</span><br><span class="line">SELECT LOWER(&#x27;john&#x27;);</span><br><span class="line">SELECT LOWER(&#x27;JOHN&#x27;);</span><br></pre></td></tr></table></figure>

<p>案例一：将姓变大写，名变小写，然后拼接</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  CONCAT(</span><br><span class="line">    UPPER(last_name),</span><br><span class="line">    &#x27;_&#x27;,</span><br><span class="line">    LOWER(first_name)</span><br><span class="line">  ) AS 姓名 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>substr、substring</strong></p>
<p>截取字符串</p>
</li>
</ul>
<blockquote>
<p>注意：索引从1开始</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#截取从指定索引处后面所有的字符</span><br><span class="line">SELECT SUBSTR(&#x27;罗密欧与朱丽叶&#x27;,5) out_put;#朱丽叶</span><br><span class="line">#截取从指定索引处指定字符长度的字符</span><br><span class="line">SELECT SUBSTR(&#x27;罗密欧与朱丽叶&#x27;,1,3(截几位)) out_put;#罗密欧</span><br></pre></td></tr></table></figure>

<p>案例一：姓名中首字符大写，其他字符小写，然后用_拼接显示出来</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  CONCAT(</span><br><span class="line">    UPPER(SUBSTR(last_name, 1, 1)),</span><br><span class="line">    &#x27;_&#x27;,</span><br><span class="line">    LOWER(SUBSTR(last_name, 2))</span><br><span class="line">  ) AS 姓名 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>instr</strong></p>
<p>返回字符串中子字符串第一次出现的位置。如果在<code>str</code>中找不到子字符串，则<code>INSTR()</code>函数返回零(<code>0</code>)。</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT INSTR(&#x27;罗密欧与朱丽叶&#x27;,&#x27;朱&#x27;);#5</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>trim</strong></li>
</ul>
<p>除掉一个字串中的字头或字尾</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT LENGTH(TRIM(&#x27;     张翠山     &#x27;) ) As out_put;</span><br><span class="line">#张翠山</span><br><span class="line">SELECT TRIM (&#x27;a&#x27; FROM &#x27;aaaaaaaa张aaaaaaaaaaaa翠山aaaaaaaaaaaaaaaa8aaaaaaaaaaaaaaaaaaa &#x27;) AS out_put;</span><br><span class="line">#张aaaaaaaaaaaa翠山</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>lpad</strong></li>
</ul>
<p>用指定的字符实现左填充指定长度</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT LPAD(&#x27;拉姆达&#x27;,10,&#x27;*&#x27;) </span><br><span class="line">AS out_put;</span><br><span class="line">#out_put</span><br><span class="line">#*******拉姆达</span><br><span class="line">SELECT LPAD(&#x27;拉姆达&#x27;,2,&#x27;*&#x27;) </span><br><span class="line">AS out_put;</span><br><span class="line">#out_put</span><br><span class="line">#拉姆  从右边截断</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>rpad</strong></li>
</ul>
<p>用指定的字符实现右填充指定长度</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT RPAD(&#x27;拉姆达&#x27;,10,&#x27;ab&#x27;) </span><br><span class="line">AS out_put;</span><br><span class="line">#out_put</span><br><span class="line">#拉姆达abababa</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>replace</strong></li>
</ul>
<p>替换</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT REPLACE(&#x27;JAVA与MyAQL&#x27;,&#x27;MyAQL&#x27;,&#x27;JS&#x27;) AS out_put;</span><br><span class="line">#JAVA与JS  </span><br><span class="line">SELECT REPLACE(&#x27;MyAQL与JAVA与MyAQL&#x27;,&#x27;MyAQL&#x27;,&#x27;JS&#x27;) AS out_put;</span><br><span class="line">#JS与JAVA与JS  全部替换</span><br></pre></td></tr></table></figure>

<p><strong>2.数学函数</strong></p>
<ul>
<li><strong>round</strong></li>
</ul>
<p>四舍五入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT ROUND(1.65);#2</span><br><span class="line">SELECT ROUND(-1.65);#-2</span><br><span class="line">SELECT ROUND(1.567，2);#1.57</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>ceil</strong></li>
</ul>
<p>向上取整，返回&gt;=该参数的最小整数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT CEIL(1.001);#2</span><br><span class="line">SELECT CEIL(-1.001);#-1</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>floor</strong></li>
</ul>
<p>向下取整，返回&lt;=该参数的最大整数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT CEIL(9.99);#9</span><br><span class="line">SELECT CEIL(-9.99);#-10</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>truncate</strong></li>
</ul>
<p>截断</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT TRUNCATE(1.65,1);#1.6</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>mod</strong></li>
</ul>
<p>取余</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT MOD(10,3);#1</span><br><span class="line">SELECT MOD(-10,-3);#-1</span><br><span class="line">#被除数为正结果为正，若为负，结果为负</span><br><span class="line">#相当于</span><br><span class="line">SELECT 10%3;</span><br></pre></td></tr></table></figure>

<p>MOD(a,b)：a-a/b*b;</p>
<p><strong>3.日期函数</strong></p>
<ul>
<li><strong>now</strong></li>
</ul>
<p>返回当前系统日期+时间</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT NOW();</span><br><span class="line">#now</span><br><span class="line">#2021-08-25 17:49:07</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>curdate</strong></li>
</ul>
<p>返回当前系统日期，不包含时间</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT CURDATE();</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>curtime</strong></li>
</ul>
<p>返回当前时间，不包含日期</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT CURTIME();</span><br></pre></td></tr></table></figure>

<ul>
<li>可以获取指定的部分，年、月、日、小时、分钟、秒</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT YEAR(NOW()) 年;</span><br><span class="line">SELECT YEAR(hiredate) 年 FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT MONTH(NOW()) 月;</span><br><span class="line">#英文</span><br><span class="line">SELECT MONTHNAME(NOW()) 月; #August</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>str_to_date</strong></li>
</ul>
<p>将日期格式的字符转换成指定格式的日期</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">STR_TO_DATE(&#x27;13-9-1999&#x27;,&#x27;%d-%m-%y&#x27;);</span><br><span class="line">#1999-9-13</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>date_format</strong></li>
</ul>
<p>将日期转换成字符</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">DATE_FORMAT(&#x27;2018/6/6&#x27;,&#x27;%Y年%m月%d日&#x27;);</span><br><span class="line">#2018年6月6日</span><br></pre></td></tr></table></figure>

<img src="https://gitee.com/are-you-a-cookie/cloudimages/raw/master/img/QQ%E6%88%AA%E5%9B%BE20210826113850.png" alt="QQ截图20210826113850" style="zoom:80%;" />

<p>案例一：查询有奖金的员工名和入职日期(xx月/xx日 xx年)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  DATE_FORMAT(hiredate, &#x27;%m月/%d日 %y年&#x27;) 入职日期 </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct IS NOT NULL ;</span><br></pre></td></tr></table></figure>

<p><strong>4.其他函数</strong></p>
<ul>
<li> <strong>version</strong></li>
</ul>
<p>版本号</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT VERSION();</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>database</strong></li>
</ul>
<p>查看当前数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DATABASE();</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>user</strong></li>
</ul>
<p>查询当前用户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT USER();</span><br></pre></td></tr></table></figure>

<p><strong>5.流程控制函数</strong></p>
<ul>
<li><strong>if函数</strong></li>
</ul>
<p>if else的效果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">IF(&#x27;10&gt;5&#x27;,&#x27;大&#x27;,&#x27;小&#x27;);#大</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>case函数</strong></li>
</ul>
<p>使用一：类似switch case 的效果</p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CASE 要判断的字段或表达式</span><br><span class="line">WHEN 常量1 THEN 要显示的值1或语句1;#值不用加分号</span><br><span class="line">WHEN 常量2 THEN 要显示的值2或语句2;</span><br><span class="line">...</span><br><span class="line">ELSE 要显示的值n或语句n;</span><br><span class="line">END</span><br></pre></td></tr></table></figure>

<p>案例一：查询员工的工资，要求</p>
<p>部门号=30，显示的工资为1.1倍</p>
<p>部门号=40，显示的工资为1.2倍</p>
<p>部门号=50，显示的工资为1.3倍</p>
<p>其他部门，显示的工资为原工资</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SELECT salary 原始工资,department_id,</span><br><span class="line">CASE department_id</span><br><span class="line">WHEN 30 THEN salary*1.1</span><br><span class="line">WHEN 40 THEN salary*1.2</span><br><span class="line">WHEN 50 THEN salary*1.3</span><br><span class="line">ELSE salary</span><br><span class="line">END AS 新工资</span><br><span class="line">FROM</span><br><span class="line">employees;</span><br></pre></td></tr></table></figure>

<p>使用二：类似 多重if</p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CASE </span><br><span class="line">WHEN 条件一 THEN 要显示的值1或语句1</span><br><span class="line">WHEN 条件一 THEN 要显示的值1或语句1</span><br><span class="line">...</span><br><span class="line">ELSE 要显示的值n或语句n</span><br><span class="line">END</span><br></pre></td></tr></table></figure>

<p>案例一：查询员工的工资的情况</p>
<p>如果工资&gt;20000，显示A级别</p>
<p>如果工资&gt;15000，显示B级别</p>
<p>如果工资&gt;10000，显示C级别</p>
<p>否则显示D级别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  salary,</span><br><span class="line">  CASE</span><br><span class="line">    WHEN salary &gt; 20000 </span><br><span class="line">    THEN &#x27;A&#x27; </span><br><span class="line">    WHEN salary &gt; 15000 </span><br><span class="line">    THEN &#x27;B&#x27; </span><br><span class="line">    WHEN salary &gt; 10000 </span><br><span class="line">    THEN &#x27;C&#x27; </span><br><span class="line">    ELSE &#x27;D&#x27; </span><br><span class="line">  END AS 工资级别 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="3-5分组函数"><a href="#3-5分组函数" class="headerlink" title="3.5分组函数"></a>3.5分组函数</h2><p>功能：用作统计使用，又称为聚合函数、统计函数、组函数</p>
<p>分类：sum求和、avg平均值、max最大值、min最小值、count计算个数</p>
<p>1.简单使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#sum</span><br><span class="line">SELECT SUM(salary)</span><br><span class="line">FROM employees;</span><br><span class="line">#avg</span><br><span class="line">SELECT AVG(salary)</span><br><span class="line">FROM employees;</span><br><span class="line">#max</span><br><span class="line">SELECT MAX(salary)</span><br><span class="line">FROM employees;</span><br><span class="line">#min</span><br><span class="line">SELECT MIN(salary)</span><br><span class="line">FROM employees;</span><br><span class="line">#count</span><br><span class="line">SELECT COUNT(salary)</span><br><span class="line">FROM employees;</span><br><span class="line">#一起查询</span><br><span class="line">SELECT SUM(salary)  和,AVG(salary)  平均值,MAX(salary)  最大值,MIN(salary)  最小值,COUNT(salary)  个数</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure>

<p>特点：</p>
<p>2.参数支持哪些类型</p>
<ul>
<li>sum、avg一般用于处理数值型</li>
<li>max、min、count可以处理任何类型</li>
</ul>
<p>3.是否忽略null值</p>
<p>以上分组函数都忽略nll值</p>
<p>3.可以和distinct搭配实现去重的运算</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT SUM(DISTINCT salary),SUM(salary) </span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(DISTINCT salary),COUNT(salary)</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure>

<p>4.count函数单独介绍</p>
<p>一般用<code>COUNT(*)</code>统计行数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(salary)</span><br><span class="line">FROM employees;</span><br><span class="line">#统计行数</span><br><span class="line">SELECT COUNT(*)</span><br><span class="line">FROM employees;</span><br><span class="line">#插入一列1，查看行数</span><br><span class="line">SELECT COUNT(1)</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure>

<p>效率：</p>
<p>MYISAM存储引擎下，<code>COUNT(*)</code>的效率高</p>
<p>INNODB存储引擎下，<code>COUNT(*)</code>和<code>COUNT(*)</code>的效率差不多，比<code>COUNT(字段)</code>要高一些。</p>
<p>6.和分组函数一同查询的字段有限制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT AVG(salary),employee_id</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure>

<p><code>AVG()</code>查询完是一个表格，而employee_id是107个但是只能显示出一个。</p>
<blockquote>
<p>tips：和分组函数一同查询的字段要求是group by后的字段</p>
</blockquote>
<p>7.<strong>DATEDIFF函数</strong></p>
<p>计算日期差</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT DATEDIFF(&#x27;2017-10-1&#x27;,&#x27;2017-9-29&#x27;)</span><br><span class="line">#2</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="3-6分组查询"><a href="#3-6分组查询" class="headerlink" title="3.6分组查询"></a>3.6分组查询</h2><p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT 分组函数,列(要求出现在group by的后面)</span><br><span class="line">FROM 表</span><br><span class="line">【WHERE 筛选条件】</span><br><span class="line">GROUP BY 分组的列表</span><br><span class="line">【ORDER BY 字句】</span><br></pre></td></tr></table></figure>

<blockquote>
<p>tips：查询列表比较特殊，要求是分组函数和group by后面出现的字段</p>
</blockquote>
<p>特点：</p>
<p>1.分组查询中的筛选条件分两类</p>
<table>
<thead>
<tr>
<th></th>
<th>数据源</th>
<th>位置</th>
<th>关键字</th>
</tr>
</thead>
<tbody><tr>
<td>分组前筛选</td>
<td>原始表</td>
<td>group by字句的前面</td>
<td>WHERE</td>
</tr>
<tr>
<td>分组后筛选</td>
<td>分组后的结果集</td>
<td>group by字句的后面</td>
<td>HAVING</td>
</tr>
</tbody></table>
<ul>
<li>分组函数分组函数做条件肯定是放在having字句中</li>
<li>能用分组前筛选的尽量用分组前筛选</li>
</ul>
<p>2.group by字句支持单个字段分组，多个字段分组(多个字段之间用逗号隔开没有顺序要求)，表达式或函数(用的较少)</p>
<p>3.也可以添加排序(排序放在整个分组查询的最后)</p>
<p><strong>1.添加分组前筛选</strong></p>
<p>简单的分组查询：</p>
<p>案例一：查询每个工种的最高工资</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT MAX(salary),job_id</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">GROUP BY job_id;</span><br></pre></td></tr></table></figure>

<p>案例二：查询每个位置上的部门个数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">COUNT(*),location_id</span><br><span class="line">FROM</span><br><span class="line">departments</span><br><span class="line">GROUP BY location_id;</span><br></pre></td></tr></table></figure>

<p>添加筛选条件：</p>
<p>案例一：查询邮箱中包含a字符的，每个部门的平均工资</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT AVG(salary),department_id</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">email LIKE &#x27;%a%&#x27;</span><br><span class="line">GROUP BY department_id;</span><br></pre></td></tr></table></figure>

<p>案例二：查询有奖金的每个领导手下员工的最高工资</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT AVG(salary),department_id</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">email LIKE &#x27;%a%&#x27;</span><br><span class="line">GROUP BY department_id;</span><br></pre></td></tr></table></figure>

<p><strong>2.添加分组后筛选</strong></p>
<p>添加复杂的筛选条件</p>
<p>案例一：查询哪个部门的员工个数&gt;2</p>
<ul>
<li>查询每个部门的员工个数</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(*),department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id;</span><br></pre></td></tr></table></figure>

<ul>
<li>根据Ⅰ的结果进行筛选，查询哪个部门的员工数&gt;2</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(*),department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">HAVING COUNT(*)&gt;2;</span><br></pre></td></tr></table></figure>

<p>案例二：查询每个工种有奖金的员工的最高工资&gt;12000的工种编号和最高工资</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT MAX(salary),job_id</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">commission_pct IS NOT NULL</span><br><span class="line">GROUP BY job_id</span><br><span class="line">HAVING MAX(salary)&gt;12000;</span><br></pre></td></tr></table></figure>

<p>案例三：查询领导编号&gt;102的，最低工资&gt;5000的领导的编号是哪个，及其最低工资</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SELECT MIN(salary),manager_id</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">manager_id&gt;102</span><br><span class="line">GROUP BY </span><br><span class="line">manager_id</span><br><span class="line">HAVING</span><br><span class="line">MIN(salary)&gt;5000;</span><br></pre></td></tr></table></figure>

<p><strong>3.按表达式或函数分组</strong></p>
<p>案例一：按员工姓名的长度分组，查询每一组的员工个数，筛选员工个数&gt;5的有哪些</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(*),LENGTH(last_name)</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">GROUP BY </span><br><span class="line">LENGTH(last_name)</span><br><span class="line">HAVING </span><br><span class="line">COUNT(*)&gt;5;</span><br></pre></td></tr></table></figure>

<p><strong>4.按多个字段分组</strong></p>
<p>案例一：查询每个部门每个工种的员工的平均工资</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT AVG(salary),department_id,job_id</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">GROUP BY department_id,job_id;</span><br></pre></td></tr></table></figure>

<p><strong>5.添加排序</strong></p>
<p>案例一：查询每个部门每个工种的员工的平均工资，并且按平均工资的高低显示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT AVG(salary),department_id,job_id</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">GROUP BY department_id,job_id</span><br><span class="line">ORDER BY AVG(salary) DESC;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="3-7连接查询"><a href="#3-7连接查询" class="headerlink" title="3.7连接查询"></a>3.7连接查询</h2><p>含义：又称多表查询，当查询的字段来自于多个表时，就会用到连接查询</p>
<p>笛卡尔乘积现象：表1 有m行 ，表2 有n行 ，结果=m*n行</p>
<ul>
<li>发生原因：没有有效的连接条件</li>
<li>如何避免：添加有效的连接条件</li>
</ul>
<p>分类：</p>
<p>1.按年代分类</p>
<ul>
<li>sql192标准：仅仅支持内连接</li>
<li>sql199标准【推荐】：支持内连接+外连接(左外和右外)+交叉连接</li>
</ul>
<p>2.按功能分类</p>
<ul>
<li>内连接：等值连接、非等值连接、自连接</li>
<li>外连接：左外连接、右外连接、全外连接</li>
<li>交叉连接</li>
</ul>
<img src="https://gitee.com/are-you-a-cookie/cloudimages/raw/master/img/QQ%E6%88%AA%E5%9B%BE20210830112023.png" alt="QQ截图20210830112023" style="zoom:80%;" />

<p><strong>一.sql192标准</strong></p>
<p><strong>1.等值连接</strong></p>
<ul>
<li>多表等值连接的结果为多表的交集部分</li>
<li>n表连接，至少需要n-1个连接条件</li>
<li>多表的顺序没有要求</li>
<li>一般需要为表起别名</li>
<li>可以搭配前面介绍的所有字句使用，比如排序、分组、筛选</li>
</ul>
<p>案例一：查询男女对应的名字</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT NAME,boyname</span><br><span class="line">FROM</span><br><span class="line">boys,beauty</span><br><span class="line">WHERE beauty.boyfriend_id=boys.id;</span><br></pre></td></tr></table></figure>

<p>案例二：查询员工名和对应的部门名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,department_name</span><br><span class="line">FROM</span><br><span class="line">departments,employees</span><br><span class="line">WHERE</span><br><span class="line">departments.`department_id`=employees.`department_id`;</span><br></pre></td></tr></table></figure>

<p>为表起别名：</p>
<p>案例一：查询员工名、工种号、工种名</p>
<ul>
<li>提高语句的简洁度</li>
<li>区分多个重名的字段</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,e.`job_id`,job_title</span><br><span class="line">FROM employees e,jobs j</span><br><span class="line">WHERE e.`job_id`=j.`job_id`;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>tips：如果为表起了别名，则查询的字段就不能使用原来的表名去限定</p>
<p>两个表的顺序是可以调换的</p>
</blockquote>
<p>加筛选：</p>
<p>案例一：查询有奖金的员工名、部门名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,department_name</span><br><span class="line">FROM</span><br><span class="line">departments,employees</span><br><span class="line">WHERE</span><br><span class="line">departments.`department_id`=employees.`department_id`</span><br><span class="line">AND</span><br><span class="line">commission_pct IS NOT NULL;</span><br></pre></td></tr></table></figure>

<p>案例二：查询城市名中第二个字符为o的部门名和城市名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">department_name,city</span><br><span class="line">FROM</span><br><span class="line">departments d,locations l</span><br><span class="line">WHERE</span><br><span class="line">d.`location_id`=l.`location_id`</span><br><span class="line">AND</span><br><span class="line">city LIKE &#x27;_o%&#x27;;</span><br></pre></td></tr></table></figure>

<p>加分组：</p>
<p>案例一：查询每个城市的部门个数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">COUNT(*) 个数,city</span><br><span class="line">FROM</span><br><span class="line">departments d,locations l</span><br><span class="line">WHERE</span><br><span class="line">d.`location_id`=l.`location_id`</span><br><span class="line">GROUP BY city;</span><br></pre></td></tr></table></figure>

<p>案例二：查询有奖金的每个部门的部门名和部门的领导编号和该部门的最低工资</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">department_name,d.manager_id,MIN(salary)</span><br><span class="line">FROM</span><br><span class="line">departments d,employees e</span><br><span class="line">WHERE </span><br><span class="line">d.`department_id`=e.`department_id`</span><br><span class="line">AND commission_pct IS NOT NULL</span><br><span class="line">GROUP BY department_name,d.manager_id;</span><br></pre></td></tr></table></figure>

<p>加排序：</p>
<p>案例一：查询每个工种的工种名和员工的个数，并且按员工个数降序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT job_title,COUNT(*) 员工个数</span><br><span class="line">FROM employees e,jobs j</span><br><span class="line">WHERE</span><br><span class="line">e.`job_id`=j.`job_id`</span><br><span class="line">GROUP BY job_title</span><br><span class="line">ORDER BY COUNT(*) DESC;</span><br></pre></td></tr></table></figure>

<p>三表连接：</p>
<p>案例一：查询员工名、部门名和所在的城市</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">last_name,department_name,city</span><br><span class="line">FROM</span><br><span class="line">employees e,departments d,locations l</span><br><span class="line">WHERE</span><br><span class="line">e.`department_id`=d.`department_id`</span><br><span class="line">AND</span><br><span class="line">d.`location_id`=l.`location_id`;</span><br></pre></td></tr></table></figure>

<p><strong>2.非等值连接</strong></p>
<p>案例一：查询员工的工资和工资级别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT salary,grade_level</span><br><span class="line">FROM employees e,job_grades j</span><br><span class="line">WHERE salary BETWEEN j.iowest_sal AND j.highest_sal;</span><br></pre></td></tr></table></figure>

<p><strong>3.自连接</strong></p>
<p>案例一：查询员工名和上级的名称</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT e.employee_id,e.last_name,m.last_name,m.employee_id</span><br><span class="line">FROM employees e,employees m</span><br><span class="line">WHERE e.`manager_id`=m.`employee_id`;</span><br></pre></td></tr></table></figure>

<p><strong>二.sql199标准</strong></p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT 查询列表</span><br><span class="line">FROM 表1 别名 【连接类型】</span><br><span class="line">JOIN 表2 别名</span><br><span class="line">ON 连接条件</span><br><span class="line">【WHERE 筛选条件】</span><br><span class="line">【GROUP BY 分组】</span><br><span class="line">【HAVING 筛选条件】</span><br><span class="line">【ORDER BY 排序列表】</span><br></pre></td></tr></table></figure>

<p><strong>1.内连接</strong></p>
<p>连接类型：inner</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT 查询列表</span><br><span class="line">FROM 表1 别名</span><br><span class="line">INNER JOIN 表2 别名</span><br><span class="line">ON 连接条件;</span><br></pre></td></tr></table></figure>

<p>分类：</p>
<p><strong>1.等值连接</strong></p>
<p>特点：</p>
<ul>
<li>可以添加排序、分组、筛选</li>
<li>inner可以省略</li>
<li>筛选条件放在where的后面，连接条件放在on后面，提高分离性，便于阅读</li>
<li>inner join 连接和sql192语法中的等值连接效果是一样的，都是查询多表的交集</li>
</ul>
<p>案例一：查询员工名、部门名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,department_name</span><br><span class="line">FROM</span><br><span class="line">employees e</span><br><span class="line">INNER JOIN departments d</span><br><span class="line">ON e.`department_id`=d.`department_id`;</span><br></pre></td></tr></table></figure>

<p>案例二：查询名字中包含e的员工名和工种名(加筛选)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,job_title</span><br><span class="line">FROM</span><br><span class="line">employees e</span><br><span class="line">INNER JOIN jobs j</span><br><span class="line">ON e.`job_id`=j.`job_id`</span><br><span class="line">WHERE e.`last_name` LIKE &#x27;%e%&#x27;;</span><br></pre></td></tr></table></figure>

<p>案例三：查询部门个数&gt;3的城市名和部门个数(分组+筛选)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(*) 部门个数,city</span><br><span class="line">FROM</span><br><span class="line">departments d</span><br><span class="line">INNER JOIN locations l</span><br><span class="line">ON d.`location_id`=l.`location_id`</span><br><span class="line">GROUP BY city</span><br><span class="line">HAVING 部门个数&gt;3;</span><br></pre></td></tr></table></figure>

<p>案例四：查询部门员工个数&gt;3的部门名和员工个数，并按个数降序(排序)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(*) 个数,department_name</span><br><span class="line">FROM</span><br><span class="line">employees e</span><br><span class="line">INNER JOIN departments d</span><br><span class="line">ON e.`department_id`=d.`department_id`</span><br><span class="line">GROUP BY department_name</span><br><span class="line">HAVING COUNT(*)&gt;3</span><br><span class="line">ORDER BY COUNT(*) DESC;</span><br></pre></td></tr></table></figure>

<p>案例五：查询员工名、部门名、工种名，并按部门名降序(三表连接)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,department_name,job_title</span><br><span class="line">FROM employees e</span><br><span class="line">INNER JOIN departments d ON e.`department_id`=d.`department_id`</span><br><span class="line">INNER JOIN jobs j ON e.`job_id`=j.`job_id`</span><br><span class="line">ORDER BY department_name DESC;</span><br></pre></td></tr></table></figure>

<p><strong>2.非等值连接</strong></p>
<p>案例一：查询员工的工资级别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT salary,grade_level</span><br><span class="line">FROM employees e</span><br><span class="line">JOIN job_grades j</span><br><span class="line">ON e.`salary` BETWEEN j.`iowest_sal` AND j.`highest_sal`;</span><br></pre></td></tr></table></figure>

<p>案例二：查询每个工资级别的个数&gt;20的个数，并且按工资级别降序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(*) 个数,grade_level</span><br><span class="line">FROM employees e</span><br><span class="line">JOIN job_grades j</span><br><span class="line">ON e.`salary` BETWEEN j.`iowest_sal` AND j.`highest_sal`</span><br><span class="line">GROUP BY grade_level</span><br><span class="line">HAVING COUNT(*)&gt;20</span><br><span class="line">ORDER BY grade_level DESC;</span><br></pre></td></tr></table></figure>

<p><strong>3.自连接</strong></p>
<p>案例一：查询姓名中包含字符k的员工的名字、上级的名字</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT e.last_name,m.last_name</span><br><span class="line">FROM</span><br><span class="line">employees e</span><br><span class="line">JOIN employees m</span><br><span class="line">ON e.`manager_id`=m.`employee_id`</span><br><span class="line">WHERE e.`last_name` LIKE &#x27;%k%&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>2.外连接</strong></p>
<p>应用场景：用于查询一个表中有，另一个表没有的记录</p>
<p><strong>特点：</strong></p>
<p>1.外连接的查询结果为主表中的所有记录</p>
<ul>
<li>如果从表中有和它匹配的，则显示匹配的值</li>
<li>如果从表中没有和它匹配的，则显示null</li>
<li>外连接查询结果=内连接查询结果+主表中有而从表中没有的记录</li>
</ul>
<p>2.左外连接，left join左边的是主表</p>
<p>3.右外连接，right join右边的是主表</p>
<p>4.左外和右外交换两个表的顺序，可以实现同样的效果</p>
<p>5.全外连接=内连接的结果+表1中有但是表2中没有的+表2中有但是表1中没有的</p>
<p><strong>语法：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT 查询列表</span><br><span class="line">FROM 表1 别名</span><br><span class="line">LEFT|RIGHT|FULL【OUTER】 JOIN 表2 别名 ON 连接条件</span><br><span class="line">WHERE 筛选条件</span><br><span class="line">GROUP BY 分组条件</span><br><span class="line">HAVING 分组后的筛选</span><br><span class="line">ORDER BY 排序列表</span><br><span class="line">LIMIT 字句</span><br></pre></td></tr></table></figure>

<hr>
<ul>
<li><strong>左外连接</strong></li>
</ul>
<p>连接类型：left 【outer】</p>
<p>案例一：查询没有男朋友的女神名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT b.name</span><br><span class="line">FROM beauty b</span><br><span class="line">LEFT OUTER JOIN boys bo</span><br><span class="line">ON  b.`boyfriend_id`=bo.`id`</span><br><span class="line">WHERE bo.`id` IS NULL;</span><br></pre></td></tr></table></figure>

<p>案例二：查询哪个部门没有员工(左外连接)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT d.*,e.employee_id</span><br><span class="line">FROM departments d</span><br><span class="line">LEFT OUTER JOIN employees e</span><br><span class="line">ON d.`department_id`=e.`department_id`</span><br><span class="line">WHERE e.`employee_id` IS NULL;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>右外连接</strong></li>
</ul>
<p>连接类型：right 【outer】</p>
<p>案例一：查询没有男朋友的女神名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT b.name</span><br><span class="line">FROM boys bo</span><br><span class="line">RIGHT OUTER JOIN beauty b</span><br><span class="line">ON  b.`boyfriend_id`=bo.`id`</span><br><span class="line">WHERE bo.`id` IS NULL;</span><br></pre></td></tr></table></figure>

<p>案例二：查询哪个部门没有员工(右外连接)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT d.*,e.employee_id</span><br><span class="line">FROM employees e</span><br><span class="line">LEFT OUTER JOIN departments d</span><br><span class="line">ON d.`department_id`=e.`department_id`</span><br><span class="line">WHERE e.`employee_id` IS NULL;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>全外连接</strong></li>
</ul>
<p>连接类型：full 【outer】</p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">USE girls;</span><br><span class="line">SELECT b.*,bo.*</span><br><span class="line">FROM beauty b</span><br><span class="line">FULL OUTER JOIN boys bo</span><br><span class="line">ON b.`boyfriend_id`=bo.id;</span><br></pre></td></tr></table></figure>

<p><strong>3.交叉连接</strong></p>
<p>连接类型：cross</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT b.*,bo.*</span><br><span class="line">FROM beauty b</span><br><span class="line">CROSS JOIN boys bo;</span><br></pre></td></tr></table></figure>

<p><strong>总结：</strong></p>
<p>sql192和sql199<strong>PK</strong></p>
<p>功能：sql支持的较多</p>
<p>可读性：sql199实现连接条件和筛选条件分离，可读性较高</p>
<img src="https://gitee.com/are-you-a-cookie/cloudimages/raw/master/img/QQ%E6%88%AA%E5%9B%BE20210904174554.png" alt="QQ截图20210904174554" style="zoom:67%;" />

<img src="https://gitee.com/are-you-a-cookie/cloudimages/raw/master/img/QQ%E6%88%AA%E5%9B%BE20210904174652.png" alt="QQ截图20210904174652" style="zoom:67%;" />

<p>案例一：查询编号&gt;3的女神的男朋友信息，如果有则列出信息，如果没有，则用null填充</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT b.id,b.name,bo.*</span><br><span class="line">FROM beauty b</span><br><span class="line">LEFT OUTER JOIN boys bo</span><br><span class="line">ON b.`boyfriend_id`=bo.`id`</span><br><span class="line">WHERE b.`id`&gt;3;</span><br></pre></td></tr></table></figure>

<p>案例二：查询哪个城市没有部门</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT city</span><br><span class="line">FROM departments d</span><br><span class="line">RIGHT OUTER JOIN locations l</span><br><span class="line">ON d.`location_id`=l.`location_id`</span><br><span class="line">WHERE d.`department_id` IS NULL;</span><br></pre></td></tr></table></figure>

<p>案例三：查询部门名为SAL或IT的员工信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT e.*,d.department_name,d.department_id</span><br><span class="line">FROM departments d</span><br><span class="line">LEFT OUTER JOIN employees e</span><br><span class="line">ON d.`department_id`=e.`department_id`</span><br><span class="line">WHERE d.`department_name` IN (&#x27;SAL&#x27;,&#x27;IT&#x27;);</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/are-you-a-cookie/cloudimages/raw/master/img/QQ%E6%88%AA%E5%9B%BE20210904181727.png" alt="QQ截图20210904181727"></p>
<p><img src="https://gitee.com/are-you-a-cookie/cloudimages/raw/master/img/QQ%E6%88%AA%E5%9B%BE20210904181736.png" alt="QQ截图20210904181736"></p>
<blockquote>
<p>tips：一个名字但是id不一样</p>
</blockquote>
<hr>
<h2 id="3-8子查询"><a href="#3-8子查询" class="headerlink" title="3.8子查询"></a>3.8子查询</h2><hr>
<p><strong>含义：</strong></p>
<p>出现在其他语句内部的<code>SELECT</code>语句，称为子查询或内查询。</p>
<p>外部的<code>SELECT</code>语句，称为主查询或外查询。</p>
<p><strong>分类：</strong></p>
<p>1.按子查询出现的位置分类</p>
<ul>
<li><code>SELECT</code>后面</li>
</ul>
<p>仅仅支持标量子查询</p>
<ul>
<li><code>FROM</code>后面</li>
</ul>
<p>支持表子查询</p>
<ul>
<li><code>WHERE</code>或<code>HAVING</code>后面(重点)</li>
</ul>
<p>支持标量子查询(单行)(重点)、列子查询(多行)(重点)、行子查询</p>
<ul>
<li><code>EXISTS</code>后面(相关子查询)</li>
</ul>
<p>支持表子查询</p>
<p>2.按结果集的行列数不同分类</p>
<ul>
<li>标量子查询(结果集只有一行一列)</li>
<li>列子查询(结果集有一列多行)</li>
<li>行子查询(结果集有一行多列)</li>
<li>表子查询(结果集为一般为多行多列)</li>
</ul>
<p><strong>一.<code>WHERE</code>或<code>HAVING</code>后面</strong></p>
<p><strong>特点：</strong></p>
<ul>
<li>子查询放在小括号内</li>
<li>子查询一般放在条件的右侧</li>
<li>标量子查询，一般搭配着单行操作符使用</li>
</ul>
<p><code>&gt;</code> <code>&lt;</code> <code>&gt;=</code> <code>&lt;=</code> <code>=</code> <code>&lt;&gt;</code></p>
<ul>
<li>列子查询，一般搭配着多行操作符使用</li>
</ul>
<p>IN、ANY/SOME、ALL</p>
<ul>
<li>子查询的执行优先于主查询执行，主查询的条件用到了子查询的结果</li>
</ul>
<p><strong>1.标量子查询(单行子查询)</strong></p>
<p><em>一列一行</em></p>
<p>案例一：谁的工资比Abel高？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT * </span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&gt;(</span><br><span class="line">	SELECT salary</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE last_name=&#x27;Abel&#x27;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>案例二：查询<code>job_id</code>与141号员工相同，<code>salary</code>比143号员工多的员工的姓名、<code>job_id</code>和工资</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE job_id=(</span><br><span class="line">	SELECT job_id</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE	employee_id=141</span><br><span class="line">)</span><br><span class="line">AND salary&gt;(</span><br><span class="line">	SELECT salary</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE employee_id=143</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>案例三：返回公司工资最少的员工的<code>last_name</code>、<code>job_id</code>、<code>salary</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE	salary=(</span><br><span class="line">	SELECT MIN(salary)</span><br><span class="line">	FROM employees</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>案例四：查询最低工资大于50号部门最低工资的部门id和其最低工资</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT MIN(salary),department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">HAVING MIN(salary)&gt;(</span><br><span class="line">	SELECT MIN(salary)</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE department_id=50</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>非法使用标量子查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT MIN(salary),department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">HAVING MIN(salary)&gt;(</span><br><span class="line">	SELECT salary</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE department_id=50</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT MIN(salary),department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">HAVING MIN(salary)&gt;(</span><br><span class="line">	SELECT MIN(salary)</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE department_id=250</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>2.列子查询(多行子查询)</strong></p>
<p><em>一列多行</em></p>
<ul>
<li>返回多行</li>
<li>使用多行比较操作符</li>
</ul>
<p><img src="https://gitee.com/are-you-a-cookie/cloudimages/raw/master/img/QQ%E6%88%AA%E5%9B%BE20210906184307.png" alt="QQ截图20210906184307"></p>
<p>案例一：返回<code>location_id</code>是1400或1700的部门中的所有员工姓名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id IN(</span><br><span class="line">	SELECT DISTINCT department_id</span><br><span class="line">	FROM departments</span><br><span class="line">	WHERE location_id IN(1400,1700)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id =ANY(</span><br><span class="line">	SELECT DISTINCT department_id</span><br><span class="line">	FROM departments</span><br><span class="line">	WHERE location_id IN(1400,1700)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>IN等价于=ALL</li>
<li>NOT IN等价于&lt;&gt;ALL</li>
</ul>
</blockquote>
<p>案例二：返回其它工种中比<code>job_id</code>为<code>IT_PROG</code>工种任一工资低的员工的员工号、姓名、<code>job id</code> 以及<code>salary</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,employee_id,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&lt;ANY(</span><br><span class="line">	SELECT salary</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE job_id=&#x27;IT_PROG&#x27;</span><br><span class="line">)</span><br><span class="line">AND job_id&lt;&gt;&#x27;IT_PROG&#x27;;</span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,employee_id,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&lt;(</span><br><span class="line">	SELECT MAX(salary)</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE job_id=&#x27;IT_PROG&#x27;</span><br><span class="line">)</span><br><span class="line">AND job_id&lt;&gt;&#x27;IT_PROG&#x27;;</span><br></pre></td></tr></table></figure>

<p>案例三：返回其它工种中比<code>job_id</code>为<code>IT_PROG</code>工种所有工资低的员工的员工号、姓名、<code>job id</code> 以及<code>salary</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,employee_id,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&lt;ALL(</span><br><span class="line">	SELECT salary</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE job_id=&#x27;IT_PROG&#x27;</span><br><span class="line">)</span><br><span class="line">AND job_id&lt;&gt;&#x27;IT_PROG&#x27;;</span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,employee_id,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary&lt;(</span><br><span class="line">	SELECT MIN(salary)</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE job_id=&#x27;IT_PROG&#x27;</span><br><span class="line">)</span><br><span class="line">AND job_id&lt;&gt;&#x27;IT_PROG&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>3.行子查询(多列多行)</strong></p>
<p><em>一行多列或者多行多列</em>     主要为一行多列</p>
<p>案例一：查询员工编号最小并且工资最高的员工信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM employees</span><br><span class="line">WHERE employee_id=(</span><br><span class="line">	SELECT MIN(employee_id)</span><br><span class="line">	FROM employees</span><br><span class="line">)</span><br><span class="line">AND salary=(</span><br><span class="line">	SELECT MAX(salary)</span><br><span class="line">	FROM employees</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT * </span><br><span class="line">FROM employees</span><br><span class="line">WHERE (employee_id,salary)=(</span><br><span class="line">	SELECT MIN(employee_id),MAX(salary)</span><br><span class="line">	FROM employees</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>二.<code>SELECT</code>后面</strong></p>
<ul>
<li><strong>仅仅支持标量子查询</strong></li>
</ul>
<p>案例一：查询每个部门的员工个数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT d.*,(</span><br><span class="line">	SELECT COUNT(*)</span><br><span class="line">	FROM employees e</span><br><span class="line">	WHERE d.`department_id`=e.department_id</span><br><span class="line">) 个数</span><br><span class="line">FROM departments d;</span><br></pre></td></tr></table></figure>

<p>案例二：查询员工号=102的部门名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT (</span><br><span class="line">	SELECT department_name</span><br><span class="line">	FROM departments d</span><br><span class="line">	INNER JOIN employees e</span><br><span class="line">	ON d.department_id=e.department_id</span><br><span class="line">	WHERE  e.employee_id=102</span><br><span class="line">) 部门名;</span><br></pre></td></tr></table></figure>

<p><strong>三.<code>FROM</code>后面</strong></p>
<p><strong>仅仅支持表子查询</strong></p>
<blockquote>
<p>tips：将子查询结果充当一张表，要求必须起别名</p>
</blockquote>
<p>案例一：查询每个部门的平均工资的工资等级</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT ag_dep.*,j.`grade_level`</span><br><span class="line">FROM (</span><br><span class="line">	SELECT AVG(salary) ag,department_id</span><br><span class="line">	FROM employees</span><br><span class="line">	GROUP BY department_id</span><br><span class="line">) ag_dep</span><br><span class="line">INNER JOIN job_grades j</span><br><span class="line">ON ag_dep.ag BETWEEN j.`iowest_sal` AND j.`highest_sal`;</span><br></pre></td></tr></table></figure>

<p><strong>四.<code>EXISTS</code>后面(相关子查询)</strong></p>
<p><strong>仅仅支持表子查询</strong></p>
<p>exists 布尔类型</p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXISTS(完整的查询语句)</span><br></pre></td></tr></table></figure>

<p>结果：1或0</p>
<p>案例一：查询有员工的部门名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#用EXISTS</span><br><span class="line">SELECT department_name</span><br><span class="line">FROM departments d</span><br><span class="line">WHERE EXISTS(</span><br><span class="line">	SELECT *</span><br><span class="line">	FROM employees e</span><br><span class="line">	WHERE e.`department_id`=d.`department_id`</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#用IN</span><br><span class="line">SELECT department_name</span><br><span class="line">FROM departments d</span><br><span class="line">WHERE d.`department_id` IN(</span><br><span class="line">	SELECT department_id</span><br><span class="line">	FROM employees</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>案例二：查询没有女朋友的男神信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#IN</span><br><span class="line">SELECT bo.*</span><br><span class="line">FROM boys bo</span><br><span class="line">WHERE bo.`id` NOT IN(</span><br><span class="line">	SELECT boyfriend_id</span><br><span class="line">	FROM beauty</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#EXISTS</span><br><span class="line">SELECT bo.*</span><br><span class="line">FROM boys bo</span><br><span class="line">WHERE NOT EXISTS(</span><br><span class="line">	SELECT boyfriend_id</span><br><span class="line">	FROM beauty b</span><br><span class="line">	WHERE bo.`id`=b.`boyfriend_id`</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="3-9分页查询"><a href="#3-9分页查询" class="headerlink" title="3.9分页查询"></a>3.9分页查询</h2><ul>
<li>应用场景： 当要显示的数据，一页显示不全，需要分页提交sql请求</li>
<li>语法：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SELECT 	查询列表</span><br><span class="line">FROM 表</span><br><span class="line">【JOIN TYPE JOIN 表2</span><br><span class="line">ON 连接条件</span><br><span class="line">WHERE 筛选条件</span><br><span class="line">GROUP BY 分组字段</span><br><span class="line">HAVING 分组后的筛选</span><br><span class="line">ORDER BY 排序的字段】</span><br><span class="line">LIMIT offset,size;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>offset</code>：要显示条目的起始索引(起始索引从0开始)</li>
<li><code>size</code>：要显示的条目个数</li>
</ul>
<p>特点：</p>
<ul>
<li><p><code>LIMIT</code>语句放在查询语句的最后</p>
</li>
<li><p>公式</p>
<p>要显示的页数  page     每页的条目数   size</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT 查询列表</span><br><span class="line">FROM 表</span><br><span class="line">LIMIT (page-1)*size,size;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>案例一：查询前五条员工信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM employees</span><br><span class="line">LIMIT 0,5;</span><br></pre></td></tr></table></figure>

<p>案例二：查询第11条——第25条</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM employees</span><br><span class="line">LIMIT 10,15;</span><br></pre></td></tr></table></figure>

<p>案例三：有奖金的员工信息，并且工资较高的前10名显示出来</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM employees</span><br><span class="line">WHERE commission_pct IS NOT NULL</span><br><span class="line">ORDER BY salary DESC</span><br><span class="line">LIMIT 0,10;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="3-10union联合查询"><a href="#3-10union联合查询" class="headerlink" title="3.10union联合查询"></a>3.10union联合查询</h2><p>关键字：<strong>UNION</strong> 联合 合并 ：将多条查询语句的结果合并成一个结果</p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">查询语句1</span><br><span class="line">UNION</span><br><span class="line">查询语句2</span><br><span class="line">UNION</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>应用场景：要查询的结果来自于多个表，且多个表没有直接的连接关系，但查询的信息一致时，一般用联合查询。</p>
<p>特点：</p>
<ul>
<li>要求多条查询语句的查询列数是一致的</li>
<li>要求多条查询语句查询的每一列的类型和顺序最好一致</li>
<li>UNION关键字默认去重，如果使用UNION ALL可以包含重复项 </li>
</ul>
<p>案例一：查询部门编号大于90或者邮箱包含a的员工信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE email LIKE &#x27;%a%&#x27;</span><br><span class="line">OR department_id&gt;90 ;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM employees WHERE email LIKE &#x27;%a%&#x27;</span><br><span class="line">UNION</span><br><span class="line">SELECT * FROM employees WHERE department_id&gt;90;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="第四章-DML语言"><a href="#第四章-DML语言" class="headerlink" title="第四章    DML语言"></a>第四章    DML语言</h1><hr>
<p><strong>数据操纵语言</strong></p>
<h2 id="4-1插入语言"><a href="#4-1插入语言" class="headerlink" title="4.1插入语言"></a>4.1插入语言</h2><p><strong>INSERT</strong></p>
<p><strong>方式一：经典的插入</strong></p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO 表名(列名,...) VALUES(值1,...)</span><br></pre></td></tr></table></figure>

<p>1.插入的值的类型要与列的类型一致或兼容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO beauty(id,NAME,sex,borndate,phone,photo,boyfriend_id)</span><br><span class="line">VALUE(13,&#x27;唐艺昕&#x27;,&#x27;女&#x27;,&#x27;1990-4-23&#x27;,&#x27;18988888888&#x27;,NULL,2);</span><br></pre></td></tr></table></figure>

<p>2.不可以为null的列必须插入值，可以为null的列如何插入值？</p>
<p>方式一：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO beauty(id,NAME,sex,borndate,phone,photo,boyfriend_id)</span><br><span class="line">VALUE(13,&#x27;唐艺昕&#x27;,&#x27;女&#x27;,&#x27;1990-4-23&#x27;,&#x27;18988888888&#x27;,NULL,2);</span><br></pre></td></tr></table></figure>

<p>方式二：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO beauty(id,NAME,sex,borndate,phone,boyfriend_id)</span><br><span class="line">VALUE(14,&#x27;金星&#x27;,&#x27;女&#x27;,&#x27;1980-4-13&#x27;,&#x27;18988888888&#x27;,9);</span><br></pre></td></tr></table></figure>

<p>3.列的顺序是否可以调换</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO beauty(NAME,sex,id,phone)</span><br><span class="line">VALUE(&#x27;蒋欣&#x27;,&#x27;女&#x27;,15,&#x27;18988588888&#x27;);</span><br></pre></td></tr></table></figure>

<p>可以调换</p>
<p>4.列数和值的个数必须一致</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO beauty(NAME,sex,id,phone)</span><br><span class="line">VALUE(&#x27;蒋欣&#x27;,&#x27;女&#x27;,15,&#x27;18988588888&#x27;);</span><br></pre></td></tr></table></figure>

<p>5.可以省略列名，默认所有列，而且列的顺序和表中列的顺序一致</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO beauty</span><br><span class="line">VALUES(18,&#x27;张飞&#x27;,&#x27;男&#x27;,NULL,&#x27;119&#x27;,NULL,NULL);</span><br></pre></td></tr></table></figure>

<p><strong>方式二：</strong></p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO 表名</span><br><span class="line">SET 列名=值,列名=值,...</span><br></pre></td></tr></table></figure>

<p>案例一：插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO beauty</span><br><span class="line">SET id=19,NAME=&#x27;刘涛&#x27;,phone=&#x27;999&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>两种方式进行比较</strong></p>
<p>1.方式一：支持插入多行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO beauty(id,NAME,sex,borndate,phone,photo,boyfriend_id)</span><br><span class="line">VALUE(13,&#x27;唐艺昕&#x27;,&#x27;女&#x27;,&#x27;1990-4-23&#x27;,&#x27;18988888888&#x27;,NULL,2),</span><br><span class="line">(14,&#x27;唐艺昕&#x27;,&#x27;女&#x27;,&#x27;1990-4-23&#x27;,&#x27;18988888888&#x27;,NULL,2),</span><br><span class="line">(15,&#x27;唐艺昕&#x27;,&#x27;女&#x27;,&#x27;1990-4-23&#x27;,&#x27;18988888888&#x27;,NULL,2);</span><br></pre></td></tr></table></figure>

<p>2.方式一：支持子查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO beauty(id,NAME,phone)</span><br><span class="line">SELECT id,boyname,&#x27;11809866&#x27;</span><br><span class="line">FROM boys </span><br><span class="line">WHERE id&lt;3;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="4-2修改语句"><a href="#4-2修改语句" class="headerlink" title="4.2修改语句"></a>4.2修改语句</h2><p><strong>UPDATE</strong></p>
<p><strong>1.修改单表的记录</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">UPDATE 表名#1</span><br><span class="line">SET 列=新值,列=新值,...#2</span><br><span class="line">WHERE 筛选条件;#3</span><br><span class="line">#执行顺序132</span><br></pre></td></tr></table></figure>

<p>案例一：修改beauty表中姓唐的电话为13899889999</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UPDATE beauty</span><br><span class="line">SET phone=&#x27;13899889999&#x27;</span><br><span class="line">WHERE NAME LIKE &#x27;唐%&#x27;;</span><br></pre></td></tr></table></figure>

<p>案例二：修改boys表中id号为2的名称为张飞，魅力值1000</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UPDATE boys</span><br><span class="line">SET boyName=&#x27;张飞&#x27;,userCP=1000</span><br><span class="line">WHERE id=2;</span><br></pre></td></tr></table></figure>

<p><strong>2.修改多表的记录(级联更新)</strong></p>
<p>语法：</p>
<p>sql192语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">UPDATE 表1 别名,表2 别名</span><br><span class="line">SET 列=值,...</span><br><span class="line">WHERE 连接条件</span><br><span class="line">AND 筛选条件;</span><br></pre></td></tr></table></figure>

<p>sql199语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">UPDATE 表1 别名</span><br><span class="line">INNER|LEFT|RIGHT JOIN 表2 别名</span><br><span class="line">ON 连接条件</span><br><span class="line">SET 列=值</span><br><span class="line">WHERE 筛选条件;</span><br></pre></td></tr></table></figure>

<p>案例一：修改张无忌女朋友的手机号为114</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">UPDATE boys bo</span><br><span class="line">INNER JOIN beauty b</span><br><span class="line">ON bo.`id`=b.`boyfriend_id`</span><br><span class="line">SET phone=114</span><br><span class="line">WHERE boyName=&#x27;张无忌&#x27;;</span><br></pre></td></tr></table></figure>

<p>案例二：修改没有男朋友的女神的男朋友编号都为2号</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">UPDATE boys bo</span><br><span class="line">RIGHT JOIN beauty b</span><br><span class="line">ON bo.`id`=b.`boyfriend_id`</span><br><span class="line">SET boyfriend_id=2</span><br><span class="line">WHERE b.`boyfriend_id` IS NULL;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="4-3删除语句"><a href="#4-3删除语句" class="headerlink" title="4.3删除语句"></a>4.3删除语句</h2><p><strong>DELETE</strong></p>
<p><strong>1.单表的删除</strong></p>
<p>方式一：<strong>DELETE</strong></p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DELETE </span><br><span class="line">FROM 表名 </span><br><span class="line">【WHERE 筛选条件】</span><br><span class="line">【LIMIT 条目数】 </span><br></pre></td></tr></table></figure>

<p>案例：删除一条</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DELETE</span><br><span class="line">FROM beauty</span><br><span class="line">WHERE boyfriend_id=4</span><br><span class="line">LIMIT 1;</span><br></pre></td></tr></table></figure>

<p>案例一：删除手机号以9结尾的女神信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DELETE </span><br><span class="line">FROM beauty b</span><br><span class="line">WHERE phone LIKE &#x27;%9&#x27;;</span><br></pre></td></tr></table></figure>

<p>方式二：<strong>TRUNCATE语句</strong></p>
<ul>
<li>不允许加WHERE语句</li>
<li>删除表中全部数据</li>
</ul>
<p>案例二：将魅力值&gt;100的男神的信息删除</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#不允许筛选，全部删除</span><br></pre></td></tr></table></figure>

<p><strong>2.多表的删除(级联删除)</strong></p>
<p>方式一：<strong>DELETE</strong></p>
<p>语法：</p>
<p>sql192语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DELETE 表1的别名，表2的别名#删除哪个表写哪个表</span><br><span class="line">FROM 表1 别名,表2 别名</span><br><span class="line">WHERE 连接条件</span><br><span class="line">AND 筛选条件;</span><br></pre></td></tr></table></figure>

<p>sql199语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DELETE 表1的别名，表2的别名</span><br><span class="line">FROM 表1 别名</span><br><span class="line">INNER|LEFT|RIGHT JOIN 表2 别名 </span><br><span class="line">ON 连接条件</span><br><span class="line">WHERE 筛选条件;</span><br></pre></td></tr></table></figure>

<p>案例一：删除张无忌的女朋友的信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DELETE b</span><br><span class="line">FROM boys bo</span><br><span class="line">JOIN beauty b</span><br><span class="line">ON bo.`id`=b.`boyfriend_id`</span><br><span class="line">WHERE boyName=&#x27;张无忌&#x27;;</span><br></pre></td></tr></table></figure>

<p>案例二：删除黄晓明的信息以及他女朋友的信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DELETE b,bo</span><br><span class="line">FROM boys bo</span><br><span class="line">RIGHT JOIN beauty b</span><br><span class="line">ON bo.`id`=b.`boyfriend_id`</span><br><span class="line">WHERE boyName=&#x27;黄晓明&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>DELETE</strong>和<strong>TRUNCATE</strong> 比较：(<strong>面试题</strong>)</p>
<p>1.delete可以加<code>WHERE</code>条件,<code>TRUNCATE</code>不能加</p>
<p>2.<code>TRUNCATE</code>删除，效率高一点</p>
<p>3.加入要删除表中有自增长列，如果用delete删除后，再插入数据，自增长列从断点开始，而truncate删除后，再插入数据，自增长列的值从1开始</p>
<p>4.truncate删除，没有返回值，delete删除，有返回值</p>
<p>5.truncate删除，不能回滚，delete删除，可以回滚</p>
<hr>
<h1 id="第五章-DDL语言"><a href="#第五章-DDL语言" class="headerlink" title="第五章    DDL语言"></a>第五章    DDL语言</h1><hr>
<p><strong>数据定义语言</strong></p>
<h2 id="5-1库和表的管理"><a href="#5-1库和表的管理" class="headerlink" title="5.1库和表的管理"></a>5.1库和表的管理</h2><hr>
<ul>
<li><strong>创建：<code>CREATE</code></strong></li>
<li><strong>修改：<code>ALTER</code></strong></li>
<li><strong>删除：<code>DROP</code></strong></li>
</ul>
<p><strong>一.库的管理</strong></p>
<p><strong>1.库的创建</strong></p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE 【IF NOT EXISTS】库名;#容错性处理</span><br></pre></td></tr></table></figure>

<p>案例一：创建数据库Books</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE IF NOT EXISTS Books;</span><br></pre></td></tr></table></figure>

<p><strong>2.库的修改</strong>    <del>啥用都没有</del></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RENAME DATABASE Books TO 新库名;#已经不能使用了</span><br></pre></td></tr></table></figure>

<p>想改的话在文件夹data里面直接改文件夹名称</p>
<p><strong>更改库的字符集</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER DATABASE Books CHARACTER SET gbk;</span><br></pre></td></tr></table></figure>

<p><strong>3.库的删除</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP DATABASE IF EXISTS Books;#容错性处理</span><br></pre></td></tr></table></figure>

<p><strong>二.表的管理</strong></p>
<p><strong>1.表的创建</strong></p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE 表名(</span><br><span class="line">          列名 列的类型 【(长度) 约束】,</span><br><span class="line">          列名 列的类型 【(长度) 约束】,</span><br><span class="line">          列名 列的类型 【(长度) 约束】,</span><br><span class="line">          ...</span><br><span class="line">          列名 列的类型 【(长度) 约束】</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>案例一：创建表Book</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE Book(</span><br><span class="line">         id INT,#编号</span><br><span class="line">         bName VARCHAR(20),#图书名</span><br><span class="line">         price DOUBLE,#价格</span><br><span class="line">         authorID INT(20),#作者编号</span><br><span class="line">         publishDate DATETIME#出版日期    </span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>案例二：创建表author</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE IF NOT EXISTS author(</span><br><span class="line">          id INT,</span><br><span class="line">          au_name VARCHAR(20),</span><br><span class="line">          nation VARCHAR(10)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>2.表的修改</strong></p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 ADD|DROP|MODIFY|CHANGE COLUMN 列名 【列类型 约束】;</span><br></pre></td></tr></table></figure>

<ul>
<li>修改列名</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE book CHANGE COLUMN publishDate pubDate DATETIME;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>tips：<code>COLUMN</code>可以省略</p>
</blockquote>
<ul>
<li>修改列的类型和约束</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE book MODIFY COLUMN pubDate TIMESTAMP;</span><br></pre></td></tr></table></figure>

<ul>
<li>添加新列</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE author ADD COLUMN annual DOUBLE;</span><br></pre></td></tr></table></figure>

<ul>
<li>删除列</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE author DROP COLUMN annual;</span><br></pre></td></tr></table></figure>

<ul>
<li>修改表名</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE author RENAME TO book_author;</span><br></pre></td></tr></table></figure>

<p><strong>3.表的删除</strong></p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS book_author;</span><br></pre></td></tr></table></figure>

<p><strong>通用的写法</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DROP DATABASE IF EXISTS 旧库名;</span><br><span class="line">CREATE DATABASE 新库名;</span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS 旧表名;</span><br><span class="line">CREATE TABLE 新表名();</span><br></pre></td></tr></table></figure>

<p><strong>4.表的复制</strong></p>
<p><strong>1.仅复制表的结构</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE author LIKE book_author;</span><br></pre></td></tr></table></figure>

<p><strong>2.复制表的结构和数据</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE copytwo</span><br><span class="line">SELECT * FROM book_author;</span><br></pre></td></tr></table></figure>

<p><strong>3.只复制部分结构</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE copythree</span><br><span class="line">SELECT id,au_name</span><br><span class="line">FROM book_author</span><br><span class="line">WHERE 1=0;#恒不成立</span><br></pre></td></tr></table></figure>

<p><strong>4.只复制部分数据</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE copyfour</span><br><span class="line">SELECT id,au_name</span><br><span class="line">FEOM book_author</span><br><span class="line">WHERE nation=&#x27;中国&#x27;;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="5-2常见数据类型介绍"><a href="#5-2常见数据类型介绍" class="headerlink" title="5.2常见数据类型介绍"></a>5.2常见数据类型介绍</h2><p><strong>数值型：</strong></p>
<ul>
<li>整型</li>
</ul>
<p><img src="https://gitee.com/are-you-a-cookie/cloudimages/raw/master/img/QQ%E6%88%AA%E5%9B%BE20210915215236.png" alt="QQ截图20210915215236"></p>
<p>分类：tinyint、smallint、mediumint、int/integer、bigint</p>
<p>​             1            2                 3                  4                8   </p>
<p>特点：</p>
<ul>
<li>如果不设置无符号还是有符号，默认是有符号，如果想设置无符号，需要添加unsigned</li>
<li>如果插入的数值超出了整型的范围，会报out of range异常，并且插入失败(新版本)，5的话插入临界值</li>
<li>如果不设置长度，会有默认的长度</li>
</ul>
<p>长度代表了显示的最大宽度，如果不够会用0在左边填充，但必须搭配** <code>ZEROFILL</code>**使用。</p>
<p>1.如何设置无符号和有符号</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tab_int(</span><br><span class="line">	t1 INT,</span><br><span class="line">	t2 INT UNSIGNED</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC tab_int;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_int VALUE(-123456,-123456);#无符号范围0~4294967295</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_int;</span><br></pre></td></tr></table></figure>

<ul>
<li>小数</li>
</ul>
<p><img src="https://gitee.com/are-you-a-cookie/cloudimages/raw/master/img/QQ%E6%88%AA%E5%9B%BE20210916211328.png" alt="QQ截图20210916211328"></p>
<p>特点：</p>
<ul>
<li>M：整数部分+小数部分     D：小数部分。如果超出范围，则插入临界值</li>
<li>M和D都可以省略</li>
</ul>
<p>如果是** <code>decimal(M,D)</code>**，则M默认为10，D默认为0</p>
<p>如果是** <code>float(M,D)</code><strong>和</strong> <code>double(M,D)</code>**，则会根据插入的数值的精度来决定精度</p>
<ul>
<li>定点型的精确度较高，如果要求插入数值的精度较高如货币运算等则考虑使用</li>
</ul>
<p>原则：所选择的类型越简单越好，能保存数值的类型越小越好</p>
<p>分类：</p>
<p>1.浮点型</p>
<ul>
<li><p>** <code>float(M,D)</code>**</p>
</li>
<li><p>** <code>double(M,D)</code>**</p>
</li>
</ul>
<p>2.定点型</p>
<ul>
<li>** <code>decimal(M,D)</code>**</li>
</ul>
<p><strong>字符型：</strong></p>
<p>1.较短的文本：</p>
<ul>
<li>** <code>char(M)</code>**</li>
<li>** <code>varchar(M)</code>**</li>
</ul>
<p><img src="https://gitee.com/are-you-a-cookie/cloudimages/raw/master/img/QQ%E6%88%AA%E5%9B%BE20210917092411.png" alt="QQ截图20210917092411"></p>
<p>特点：</p>
<p>​                        特点                            空间的耗费             效率                     M的意思</p>
<p>char           固定长度的字符               比较耗费                  高             最大的字符数，可以省略，默认为1</p>
<p>varchar      可变长度的字符               比较节省                  低             最大的字符数，不可以省略</p>
<p><strong>位类型</strong></p>
<p><img src="https://gitee.com/are-you-a-cookie/cloudimages/raw/master/img/QQ%E6%88%AA%E5%9B%BE20210917094843.png" alt="QQ截图20210917094843"></p>
<p><strong>binary和varbinary类型</strong></p>
<p>用于保存较短的二进制</p>
<p>说明：类似于char和varchar，不同的是他们包含二进制字符串而不包含非二进制字符串。</p>
<p><strong>Enum类型</strong></p>
<p>用于保存枚举</p>
<p>说明：又称枚举类型，要求插入的值必须属于列表中指定的值之一。</p>
<p><strong>Set类型</strong></p>
<p>用于保存集合</p>
<p>说明：和Enum类型类似，里面可以保存0~64个成员。和Enum类型最大的区别是：Set类型一次可以选取多个成员，而Enum只能选一个，根据成员个数不同，存储所占的字节也不同。</p>
<p><img src="https://gitee.com/are-you-a-cookie/cloudimages/raw/master/img/QQ%E6%88%AA%E5%9B%BE20210919111952.png" alt="QQ截图20210919111952"></p>
<p>2.较长的文本：</p>
<ul>
<li>text</li>
<li>blob(较长的二进制数据)</li>
</ul>
<p><strong>日期型：</strong></p>
<p><img src="https://gitee.com/are-you-a-cookie/cloudimages/raw/master/img/QQ%E6%88%AA%E5%9B%BE20210919112335.png" alt="QQ截图20210919112335"></p>
<p>分类：</p>
<ul>
<li>date只保存日期</li>
<li>time只保存时间</li>
<li>year只保存年</li>
<li>datetime保存日期+时间</li>
<li>timestamp保存日期+时间</li>
</ul>
<p>特点：</p>
<p>​                                             字节                             范围                           时区等的影响</p>
<p>datetime                                 8                             1000-9999                            不受</p>
<p>timestamp                              4                             1970-2038                              受</p>
<hr>
<h2 id="5-3常见约束"><a href="#5-3常见约束" class="headerlink" title="5.3常见约束"></a>5.3常见约束</h2><p><strong>含义：</strong>一种限制，用于限制表中的数据，为了保证表中的数据的准确和可靠性</p>
<p><strong>分类：</strong>六大约束</p>
<ul>
<li>** <code>NOT NULL</code>**：非空约束，用于保证该字段的值不能为空。比如姓名、学号等</li>
<li>** <code>DEFAULT</code>**：默认约束，用于保证该字段有默认值。比如性别</li>
<li>** <code>PRIMARY KEY</code>**：主键约束，用于保证该字段的值具有唯一性，并且非空。比如学号、员工编号等</li>
<li>** <code>UNIQUE</code>**：唯一约束，用于保证该字段的值具有唯一性，可以为空。比如座位号</li>
<li>** <code>CHECK</code>**：检查约束【mysql中不支持】(不报错，但是没有效果)。比如年龄、性别</li>
<li>** <code>FOREIGN KEY</code>**：外键约束，用于限制两个表的关系，用于保证该字段的值必须来自于主表的关联列的值。在从表添加外键约束，用于引用主表中某列的值。比如学生表的专业编号，员工表的部门编号，员工表的工种编号</li>
</ul>
<p><strong>添加约束的时机：</strong></p>
<p>1.创建表时</p>
<p>2.修改表时</p>
<p><strong>约束的添加分类</strong></p>
<ul>
<li>列级约束</li>
</ul>
<p>​           六大约束语法上都支持，但外键约束没有效果</p>
<ul>
<li>表级约束</li>
</ul>
<p>​           除了非空、默认，其他的都支持</p>
<p><strong>一、创建表时添加约束</strong></p>
<p>1.添加列级约束</p>
<p>语法：</p>
<p>直接在字段名和类型后面追加 约束类型即可。</p>
<p>只支持：默认、非空、主键、唯一</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE students;</span><br><span class="line"></span><br><span class="line">CREATE TABLE stuinfo(</span><br><span class="line">	id INT PRIMARY KEY,#主键</span><br><span class="line">	stuName VARCHAR(20) NOT NULL,#非空</span><br><span class="line">	gender CHAR(1) CHECK(gender=&#x27;男&#x27; OR gender=&#x27;女&#x27;),#检查 不报错，但是没有效果</span><br><span class="line">	seat INT UNIQUE,#唯一</span><br><span class="line">	age INT DEFAULT  18,#默认约束</span><br><span class="line">	majorId INT REFERENCES major(id)#外键  无效果</span><br><span class="line">);</span><br><span class="line">CREATE TABLE major(</span><br><span class="line">        id INT PRIMARY KEY,</span><br><span class="line">        majorName VARCHAR(20)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC stuinfo;</span><br><span class="line">#查看stuinfo中的所有索引，包括主键、外键、唯一</span><br><span class="line">SHOW INDEX FROM stuinfo;</span><br></pre></td></tr></table></figure>

<p>2.添加表级约束</p>
<p><strong>语法：</strong></p>
<p>在各个字段的最下面</p>
<p>【constraint 约束名】 约束类型(字段名)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS stuinfo;</span><br><span class="line">CREATE TABLE stuinfo(</span><br><span class="line">	id INT,</span><br><span class="line">	stuname VARCHAR(20),</span><br><span class="line">	gender CHAR(1),</span><br><span class="line">	seat INT,</span><br><span class="line">	age INT,</span><br><span class="line">	majorid INT,</span><br><span class="line">	</span><br><span class="line">	CONSTRAINT pk PRIMARY KEY(id),#主键  （默认名为PRIMARY pk没有效果）</span><br><span class="line">	CONSTRAINT uq UNIQUE(seat),#唯一键</span><br><span class="line">	CONSTRAINT ck CHECK(gender=&#x27;男&#x27; OR gender=&#x27;女&#x27;),#检查</span><br><span class="line">	CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id)#外键</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">SHOW INDEX FROM stuinfo;</span><br></pre></td></tr></table></figure>

<p><strong>通用的写法</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE IF NOT EXISTS stuinfo(</span><br><span class="line">	id INT PRIMARY KEY,</span><br><span class="line">	stuname VARCHAR(20) NOT NULL,</span><br><span class="line">	sex CHAR(1),</span><br><span class="line">	age INT DEFAULT 18,</span><br><span class="line">	seat INT UNIQUE,</span><br><span class="line">	majorid INT,</span><br><span class="line">	CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>二.修改表时添加约束</strong></p>
<p>1.添加列级约束</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 MODIFY COLUMN 字段名 字段类型 新约束;</span><br></pre></td></tr></table></figure>

<p>2.添加表级约束</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 ADD 【CONSTRAINT 约束名】 约束类型(字段名) 【外键的引用】;</span><br></pre></td></tr></table></figure>

<ul>
<li>添加非空约束</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS stuinfo;</span><br><span class="line">CREATE TABLE stuinfo(</span><br><span class="line">	id INT,</span><br><span class="line">	stuname VARCHAR(20),</span><br><span class="line">	gender CHAR(1),</span><br><span class="line">	seat INT,</span><br><span class="line">	age INT,</span><br><span class="line">	majorid INT</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#添加非空约束</span><br><span class="line">ALTER TABLE stuinfo MODIFY COLUMN stuname VARCHAR(20) NOT NULL;</span><br></pre></td></tr></table></figure>

<ul>
<li>添加默认约束</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stuinfo MODIFY COLUMN age INT DEFAULT 18;</span><br></pre></td></tr></table></figure>

<ul>
<li>添加主键</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#列级约束</span><br><span class="line">ALTER TABLE stuinfo MODIFY COLUMN id INT PRIMARY KEY;</span><br><span class="line">#表级约束</span><br><span class="line">ALTER TABLE stuinfo ADD PRIMARY KEY(id);</span><br></pre></td></tr></table></figure>

<ul>
<li>添加外键</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stuinfo ADD CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id);</span><br></pre></td></tr></table></figure>

<p><strong>二.修改表时删除约束</strong></p>
<ul>
<li>删除非空约束</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#删除非空约束</span><br><span class="line">ALTER TABLE stuinfo MODIFY COLUMN stuname VARCHAR(20) NULL;</span><br></pre></td></tr></table></figure>

<ul>
<li>删除默认约束</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stuinfo MODIFY COLUMN age INT;</span><br></pre></td></tr></table></figure>

<ul>
<li>删除主键</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stuinfo DROP PRIMARY KEY;</span><br></pre></td></tr></table></figure>

<ul>
<li>删除唯一</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stuinfo DROP INDEX seat;</span><br></pre></td></tr></table></figure>

<ul>
<li>删除外键</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stuinfo DROP FOREIGN KEY fk_stuinfo_major;</span><br></pre></td></tr></table></figure>

<p><strong>三.对比</strong></p>
<p><strong>1.主键和唯一</strong></p>
<p>​                保正唯一性       是否允许为空        一个表中可以有多少个             是否允许组合</p>
<p>主键              √                          ×                            至多有一个                       √，但不推荐</p>
<p>唯一              √                          ×                            可以有多个                       √，但不推荐</p>
<p>组合主键，组合唯一键</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PRIMARY KEY(id,stuname)#当id与stuname都相同时，会报错</span><br></pre></td></tr></table></figure>

<p><strong>2.外键的特点</strong></p>
<ul>
<li>要求在从表设置外键关系</li>
<li>从表的外键列的类型和主表的关联列的类型要求一致或兼容</li>
<li>主表的关联列必须是一个Key(一般是主键或唯一)</li>
<li>插入数据时，先插入主表，再插入从表。删除数据时，先删除从表，再删除主表</li>
</ul>
<p><strong>3.列级约束和表级约束</strong></p>
<p>​                              位置                          支持的约束类型                                 是否可以起约束名</p>
<p>列级约束：       列的后面                 语法都支持，但是外键没有效果                   不可以</p>
<p>表级约束：       所有列的下面          默认和非空不支持，其他支持                       可以(主键没有效果)</p>
<p><strong>标识列</strong></p>
<p>又称为自增长列</p>
<p><strong>含义：</strong>可以不用手动的插入值，系统提供默认的序列值</p>
<p><strong>特点：</strong></p>
<ul>
<li>标识列必须和主键搭配吗？不一定，但要求是一个Key</li>
<li>一个表可以有几个标识列？至多一个！</li>
<li>标识列的类型 只能是数值型</li>
<li>标识列可以通过SET auto_increment_increment=3;设置步长，可以通过 手动插入值，设置起始值</li>
</ul>
<p><strong>一.创建表时设置标识列</strong></p>
<p>关键字：** <code>AUTO_INCREMENT</code>**</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS tab_indentity;</span><br><span class="line">CREATE TABLE tab_indentity(</span><br><span class="line">	id INT PRIMARY KEY AUTO_INCREMENT,#标识列</span><br><span class="line">	NAME VARCHAR(20)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_indentity VALUE(NULL,&#x27;join&#x27;);</span><br><span class="line">SELECT *</span><br><span class="line">FROM tab_indentity;</span><br></pre></td></tr></table></figure>

<p><strong>1.MySQL中起始值永远是1，设置其他值也没有效果，但是步程可以设置</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SHOW VARIABLES LIKE &#x27;%AUTO_INCREMENT%&#x27;;</span><br><span class="line">SET auto_increment_increment=3;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/are-you-a-cookie/cloudimages/raw/master/img/QQ%E6%88%AA%E5%9B%BE20210926165712.png" alt="QQ截图20210926165712"></p>
<p><strong>2.设置起始值</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS tab_indentity;</span><br><span class="line">CREATE TABLE tab_indentity(</span><br><span class="line">	id INT PRIMARY KEY AUTO_INCREMENT,#标识列</span><br><span class="line">	NAME VARCHAR(20)</span><br><span class="line">);</span><br><span class="line">INSERT INTO tab_indentity VALUE(10,&#x27;join&#x27;);</span><br><span class="line">INSERT INTO tab_indentity VALUE(NULL,&#x27;join&#x27;);</span><br><span class="line">SELECT *</span><br><span class="line">FROM tab_indentity;#起始值就为10了</span><br></pre></td></tr></table></figure>

<p><strong>二.修改表时设置标识列</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE tab_indentity MODIFY COLUMN id INT PRIMARY KEY AUTO_INCREMENT;</span><br></pre></td></tr></table></figure>

<p><strong>三.修改表时删除标识列</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE tab_indentity MODIFY COLUMN id INT;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="第六章-DCL语言"><a href="#第六章-DCL语言" class="headerlink" title="第六章    DCL语言"></a>第六章    DCL语言</h1><hr>
<p><strong>数据控制语言</strong></p>
<h2 id="6-1管理用户"><a href="#6-1管理用户" class="headerlink" title="6.1管理用户"></a>6.1管理用户</h2><hr>
<p><strong>一.添加用户</strong></p>
<ul>
<li>语法：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER &#x27;用户名&#x27;@&#x27;主机名&#x27; IDENTIFIED BY &#x27;密码&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>二.删除用户</strong></p>
<ul>
<li>语法：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP USER &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>三.修改用户密码</strong></p>
<ul>
<li>语法：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">UPDATE USER SET PASSWORD = PASSWORD(&#x27;新密码&#x27;)</span><br><span class="line">WHERE USER = &#x27;用户名&#x27;;</span><br><span class="line"></span><br><span class="line">SET PASSWORD FOR &#x27;用户名&#x27;@&#x27;主机名&#x27; = PASSWORD(&#x27;新密码&#x27;);</span><br></pre></td></tr></table></figure>

<ul>
<li>MySQL中忘记了root用户的密码？</li>
</ul>
<p>1.cmd - - &gt; net stop mysql     停止mysql服务（需要以管理员身份运行cmd）</p>
<p>2.使用无验证方式启动mysql服务：mysqld –skip-grant-tables</p>
<p>3.打开新的cmd窗口，直接输入mysql命令，敲回车就可以登录成功</p>
<p>4.use mysql</p>
<p>5.update user set password = password(‘新密码’) where user=’root’;</p>
<p>6.关闭两个窗口</p>
<p>7.打开任务管理器，手动结束mysql.exe进程</p>
<p>8.启动mysql服务</p>
<p>9.使用新密码登录</p>
<p><strong>四.查询用户</strong></p>
<ul>
<li>切换到mysql数据库</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">USE mysql;</span><br></pre></td></tr></table></figure>

<ul>
<li>查询user表</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM USER;</span><br></pre></td></tr></table></figure>

<ul>
<li>通配符：%表示可以在任意主机使用用户登录数据库</li>
</ul>
<hr>
<h2 id="6-2权限管理"><a href="#6-2权限管理" class="headerlink" title="6.2权限管理"></a>6.2权限管理</h2><p><strong>一.查询权限</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW GRANTS FOR &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>二.授予权限</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GRANT 权限列表 ON 数据库名.表名 TO &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br><span class="line"></span><br><span class="line">GRANT ALL ON *.* TO &#x27;用户名&#x27;@&#x27;主机名&#x27;;#授予所有的权限</span><br></pre></td></tr></table></figure>

<p><strong>三.撤销权限</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">REVOKE 权限列表 ON 数据库.表名 FROM &#x27;用户名&#x27;@&#x27;主机名&#x27;;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="第七章-TCL语言"><a href="#第七章-TCL语言" class="headerlink" title="第七章    TCL语言"></a>第七章    TCL语言</h1><hr>
<p><strong>事务控制语言(Transaction Control Language)</strong></p>
<h2 id="7-1事务和事务处理"><a href="#7-1事务和事务处理" class="headerlink" title="7.1事务和事务处理"></a>7.1事务和事务处理</h2><p><strong>事务：</strong>一个或一组sql语句组成的一个执行单元，这个执行单元要么全部执行，要么全部不执行。</p>
<p><strong>MySQL中的存储引擎</strong></p>
<p>1.概念：在MySQL中的数据用各种不同的技术存储在文件(或内存)中。</p>
<p>2.通过show engines，来查看MySQL支持的存储引擎。</p>
<p>3.在MySQL中用的最多存储引擎有：innodb、myisam、memory等。其中innodb支持事务，而myisam、memory等不支持事务。</p>
<p><strong>一.事务的ACID属性</strong></p>
<p><strong>1.原子性</strong>(Atomicity)</p>
<p>原子性是指事务是一个不可分隔的工作单位，事务中的操作要么都发生，要么都不发生。</p>
<p><strong>2.一致性</strong>(Consistency)</p>
<p>事务必须使数据库从一个一致性状态变换到另一个一致性状态。</p>
<p><strong>3.隔离性</strong>(Isolation)</p>
<p>事务的隔离性是指一个事务的执行不能被其他事务干扰，即一个事务内部的操作及使用的数据对并发的其他事务是隔离的，并发执行的各个事务之间不能相互干扰。</p>
<p><strong>4.持久性</strong>(Durability)</p>
<p>持久性是指一个事务一旦被提交，它对数据库中数据的改变就是永久性的，接下来的其他操作和数据库故障不应该对其有任何影响。</p>
<p><strong>二.事务的创建</strong></p>
<ul>
<li><strong>隐式事务：</strong>事务没有明显的开启和结束的标记。比如：INSERT、UPDATE、DELETE语句。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM 表 WHERE id=1;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>显式事务：</strong>事务具有明显的开启和结束的标记。前提：必须先设置自动提交功能为禁用。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET autocommit=0;#设置自动提交功能为禁用</span><br></pre></td></tr></table></figure>

<p>步骤一：开启事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SET autocommit=0;</span><br><span class="line">START transaction;#可选的</span><br></pre></td></tr></table></figure>

<p>步骤二：编写事务中的sql语句(SELECT  INSERT  UPDATE  DELETE)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">语句1;</span><br><span class="line">语句2;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>步骤三：结束事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">COMMIT;提交事务</span><br><span class="line">ROLLBACK;回滚事务</span><br><span class="line">SAVEPOINT;节点名,设置保存点</span><br></pre></td></tr></table></figure>

<p><strong>演示事务的使用步骤</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#开启事务</span><br><span class="line">SET autocommit=0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line">#编写一组事务语句</span><br><span class="line">UPDATE account SET balance = 1500 WHERE username=&#x27;张无忌&#x27;;</span><br><span class="line">UPDATE account SET balance = 500  WHERE username=&#x27;赵敏&#x27;;</span><br><span class="line">#结束事务</span><br><span class="line">COMMIT;#提交</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#开启事务</span><br><span class="line">SET autocommit=0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line">#编写一组事务语句</span><br><span class="line">UPDATE account SET balance = 1000 WHERE username=&#x27;张无忌&#x27;;</span><br><span class="line">UPDATE account SET balance = 1000  WHERE username=&#x27;赵敏&#x27;;</span><br><span class="line">#结束事务</span><br><span class="line">ROLLBACK;#回滚</span><br><span class="line"></span><br><span class="line">#执行成功后，结果查看为 张无忌1500 赵敏500 不变</span><br></pre></td></tr></table></figure>

<p><strong>事务的并发问题</strong></p>
<p><img src="https://gitee.com/are-you-a-cookie/cloudimages/raw/master/img/QQ%E6%88%AA%E5%9B%BE20210928194246.png" alt="QQ截图20210928194246"></p>
<p><img src="https://gitee.com/are-you-a-cookie/cloudimages/raw/master/img/QQ%E6%88%AA%E5%9B%BE20210928194400.png" alt="QQ截图20210928194400"></p>
<p><strong>演示事务的隔离级别</strong></p>
<p>​                                                        脏读                    不可重复读                  幻读</p>
<ul>
<li>READ UNCOMMITTED             √                              √                              √ </li>
<li>READ COMMITTED                  ×                              √                              √</li>
<li>REPEATABLE READ                 ×                              ×                              √</li>
<li>SERIALIZABLE                          ×                              ×                              ×</li>
</ul>
<p>MySQL中默认 第三个隔离级别 REPEATABLE READ</p>
<p>Oracle中默认 第二个隔离级别 READ COMMITTED </p>
<p>查看隔离级别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT @@transaction_isolation;</span><br></pre></td></tr></table></figure>

<p>设置当前MySQL连接的隔离级别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET TRANSACTION ISOLATION LEVEL READ COMMITTED;</span><br></pre></td></tr></table></figure>

<p>设置数据库系统的全局的隔离级别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET GLOBAL TRANSACTION ISOLATION LEVEL READ COMMITTED;</span><br></pre></td></tr></table></figure>

<p><strong>演示savepoint的使用</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SET autocommit=0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line">DELETE FROM account WHERE id=25;</span><br><span class="line">SAVEPOINT a;#设置保存点</span><br><span class="line">DELETE FROM account WHERE id=28;</span><br><span class="line">ROLLBACK TO a;#回滚到保存点</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="第八章-视图的讲解"><a href="#第八章-视图的讲解" class="headerlink" title="第八章    视图的讲解"></a>第八章    视图的讲解</h1><hr>
<p><strong>含义：</strong>虚拟表，和普通表一样使用</p>
<p>MySQL5.1版本出现的新特性，是通过表动态生成的数据</p>
<p><strong>应用场景</strong></p>
<ul>
<li>多个地方用到同样的查询结果</li>
<li>该查询结果使用的sql语句较复杂</li>
</ul>
<p><strong>视图的好处</strong></p>
<ul>
<li>重用sql语句</li>
<li>简化复杂的sql操作，不必知道它的查询细节</li>
<li>保护数据，提高安全性</li>
</ul>
<p>案例一：查询姓张的学生名和专业名</p>
<p>以前：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT stuname,majorname</span><br><span class="line">FROM stuinfo s</span><br><span class="line">INNER JOIN major m</span><br><span class="line">ON s.`majorid`=m.`id`</span><br><span class="line">WHERE s.`stuname` LIKE &#x27;张%&#x27;;</span><br></pre></td></tr></table></figure>

<p>通过视图：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW v1</span><br><span class="line">AS</span><br><span class="line">SELECT stuname,majorname</span><br><span class="line">FROM stuinfo s</span><br><span class="line">INNER JOIN major m</span><br><span class="line">ON s.`majorid`=m.`id`;#通过视图进行封装</span><br><span class="line"></span><br><span class="line">SELECT * FROM v1 WHERE stuname LIKE &#x27;张%&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>一.创建视图</strong></p>
<p><strong>语法：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW 视图名</span><br><span class="line">AS</span><br><span class="line">查询语句;</span><br></pre></td></tr></table></figure>

<p>案例一：查询姓名中包含a字符的员工名、部门名和工种信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line">#创建</span><br><span class="line">CREATE VIEW myv1</span><br><span class="line">AS </span><br><span class="line">SELECT last_name,department_name,job_title </span><br><span class="line">FROM employees e</span><br><span class="line">JOIN departments d</span><br><span class="line">ON e.department_id=d.department_id</span><br><span class="line">JOIN jobs j</span><br><span class="line">ON j.job_id = e.job_id;</span><br><span class="line">#使用</span><br><span class="line">SELECT *</span><br><span class="line">FROM myv1</span><br><span class="line">WHERE last_name LIKE &#x27;%a%&#x27;;</span><br></pre></td></tr></table></figure>

<p>案例二：查询各部门的平均工资级别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#创建</span><br><span class="line">CREATE VIEW myv2</span><br><span class="line">AS</span><br><span class="line">SELECT AVG(salary) ag,department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id;</span><br><span class="line">#使用</span><br><span class="line">SELECT myv2.`ag`,g.grade_level</span><br><span class="line">FROM myv2</span><br><span class="line">JOIN job_grades g</span><br><span class="line">ON myv2.`ag` BETWEEN g.`iowest_sal` AND g.`highest_sal`;</span><br></pre></td></tr></table></figure>

<p>案例三：查询平均工资最低的部门的信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM myv2 ORDER BY ag LIMIT 1;</span><br></pre></td></tr></table></figure>

<p>案例四：查询平均工资最低的部门名和工资</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW myv3</span><br><span class="line">AS</span><br><span class="line">SELECT *</span><br><span class="line">FROM myv2 ORDER BY ag LIMIT 1;</span><br><span class="line"></span><br><span class="line">SELECT d.*,m.ag</span><br><span class="line">FROM myv3 m</span><br><span class="line">JOIN departments d</span><br><span class="line">ON m.`department_id`=d.`department_id`;</span><br></pre></td></tr></table></figure>

<p><strong>二.视图的修改</strong></p>
<p>方式一：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE VIEW </span><br><span class="line">AS</span><br><span class="line">查询语句;</span><br></pre></td></tr></table></figure>

<p>方式二：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER VIEW 视图名</span><br><span class="line">AS</span><br><span class="line">查询语句;</span><br></pre></td></tr></table></figure>

<p><strong>三.删除视图</strong></p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW 视图名,视图名,...;</span><br></pre></td></tr></table></figure>

<p><strong>四.查看视图</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DESC myv3;</span><br><span class="line"></span><br><span class="line">SHOW CREATE VIEW myv3;</span><br></pre></td></tr></table></figure>

<p><strong>五.视图的更新</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE VIEW myv1</span><br><span class="line">AS</span><br><span class="line">SELECT last_name,email</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT * FROM myv1;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>tips：对视图进行更新时，原始表也会进行更新</p>
</blockquote>
<p>1.插入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO MYV1 VALUE(&#x27;张飞&#x27;,&#x27;zf@qq.com&#x27;);</span><br></pre></td></tr></table></figure>

<p>2.修改</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE myv1 SET last_name=&#x27;张无忌&#x27; WHERE last_name=&#x27;张飞&#x27;;</span><br></pre></td></tr></table></figure>

<p>3.删除</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM myv1 WHERE last_name=&#x27;张无忌&#x27;;</span><br></pre></td></tr></table></figure>

<p>4.具备以下特点的视图不能更新</p>
<ul>
<li>包含以下关键字的sql语句:分组函数、distinct、group by、having、union或者union all</li>
<li>常量视图</li>
<li>Select中也含子查询</li>
<li>join</li>
<li>from—个不能更新的视图</li>
<li>where子句的子查询引用了from子句中的表</li>
</ul>
<p><strong>六.视图与表的对比</strong></p>
<p>​                                      创建语法的关键字                          是否实际占用物理空间                          使用</p>
<p>视图                                  create view                                  只是保存了sql逻辑                 增删改查，一般不能增删改</p>
<p>表                                      create table                                       保存了数据                                   增删改查</p>
<p><strong>七.delete和truncate在事务使用时的区别</strong></p>
<p>1.演示delete</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SET autocommit=0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line">DELETE FROM account;</span><br><span class="line">ROLLBACK;</span><br></pre></td></tr></table></figure>

<p>2.演示truncate</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SET autocommit=0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line">TRUNCATE TABLE account;</span><br><span class="line">ROLLBACK;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>delete支持回滚，truncate不支持回滚</p>
</blockquote>

                    <div class="clearfix"></div>
                    <hr class="nogutter">
                    <p class="note note-warning">

    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！

</p>
            </div>
            <nav class="m-pagination col-md-8 col-md-offset-2 col-sm-24" role="pagination">
    
    <a class="pull-left" href="/2022/01/14/JDBC/" style="float: left;">
        ← JDBC
    </a>
    
    
    <a class="pull-right" href="/2022/01/13/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/">
        Lambda表达式 →
    </a>
    
</nav>

                <div class="col-md-8 col-md-offset-2 col-sm-24">
                    <aside id="article-toc" nole="navigation" alass="fixed”
    <div id= " article-toc-inner ">
        <strong class="sidebar-title ">
            目录
        </strong>
        
    </div>
</aside>
                        <script type="text/javascript">
  /**
   * 搜狐畅言
   */

  /*
  document.write('<div id="SOHUCS" sid="' + window.location.pathname.slice(1) + '" ></div>');

  window.onload = function () {
    (function () {
      var appid = 'cytXXXX';
      var conf = 'prod_xxxxxxxxxxxxxxxxx';
      var width = window.innerWidth || document.documentElement.clientWidth;
      var loadJs = function (d, a, id) {
        var c = document.getElementsByTagName("head")[0] || document.head || document.documentElement;
        var b = document.createElement("script");
        b.setAttribute("type", "text/javascript");
        b.setAttribute("charset", "UTF-8");
        b.setAttribute("src", d);
        if (id) {
          b.setAttribute("id", id);
        }
        if (typeof a === "function") {
          if (window.attachEvent) {
            b.onreadystatechange = function () {
              var e = b.readyState;
              if (e === "loaded" || e === "complete") {
                b.onreadystatechange = null;
                a()
              }
            }
          } else {
            b.onload = a
          }
        }
        c.appendChild(b)
      };

      loadJs("https://changyan.sohu.com/upload/changyan.js", function () {
        window.changyan.api.config({
          appid: appid,
          conf: conf
        })
      });
    })();
  }
  */

</script>

                            <div id="vcomments"></div>
<script>
    new Valine({
        el: '#vcomments',
        notify: true,
        verify: true,
        appId: 'uqRS6rgdVAO0sqVAVmDbuepE-gzGzoHsz',
        appKey: 'IATuRpiDzSLsw829xXTjmVMc',
        placeholder: '欢迎大家来留言吧~',
        path: window.location.pathname,
        avatar: 'monsterid'
    })
</script>
                </div>

        </div>
    </section>

      <!-- ============================ Footer =========================== -->

<footer>
    <div class="container">
        <div class="copy">
            <p>
                &copy; 2022
                <script>
                    new Date().getFullYear() > 2022 && document.write("-" + new Date().getFullYear());
                </script>, Content By
                ShanTianQi. All Rights Reserved.
            </p>
            <div class="statistics">

    <!-- 不蒜子统计PV -->
    <span id="busuanzi_container_site_pv" style="display: inline;">
        本站总访问量
        <span id="busuanzi_value_site_pv"></span>次
    </span>


    <!-- 不蒜子统计UV -->
    <span id="busuanzi_container_site_uv" style="display: inline;">
        本站访客数
        <span id="busuanzi_value_site_uv"></span>人次
    </span>


</div>
                <p style="margin-bottom: 30px;"><a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/" style="color: #767D84">辽ICP备2021012349号-1</a></p>
        </div>
        <div class="clearfix"> </div>
    </div>
</footer>

<!-- ============================ END Footer =========================== -->
      <!-- Load our scripts -->
<!-- Resizable 'on-demand' full-height hero -->
<script type="text/javascript">
    var resizeHero = function () {
        var hero = $(".cover,.heightblock"),
            window1 = $(window);
        hero.css({
            "height": window1.height()
        });
    };

    resizeHero();

    $(window).resize(function () {
        resizeHero();
    });
</script>
<script src="/js/plugins.min.js"></script><!-- Bootstrap core and concatenated plugins always load here -->
<script src="/js/scripts.js"></script><!-- Theme scripts -->


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$('#intro').find('img').each(function(){
  var alt = this.alt;

  if (alt){
    $(this).after('<span class="caption" style="display:none">' + alt + '</span>');
  }

  $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="gallery" />');
});
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



      
</body>
</html>
